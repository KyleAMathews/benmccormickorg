<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>http://benmccormick.org</id>
    <title>benmccormick.org</title>
    <updated>2016-12-10T05:24:30Z</updated>
    <author>
        <name>Ben McCormick</name>
        <email>ben@benmccormick.org</email>
        <uri>http://benmccormick.org</uri>
    </author>
    <link rel="alternate" href="http://benmccormick.org"/>
    <subtitle>A blog by Ben McCormick</subtitle>
    <rights>All rights reserved 2016, Ben McCormick</rights>
    <generator>Feed for Node.js</generator>
    <contributor>
        <name>Ben McCormick</name>
        <email>ben@benmccormick.org</email>
    </contributor>
    <entry>
        <title type="html"><![CDATA[Saving Time With Jest: Meetup Summary]]></title>
        <id>https://benmccormick.org/2016/12/10/saving-time-with-jest/</id>
        <link href="https://benmccormick.org/2016/12/10/saving-time-with-jest/">
        </link>
        <updated>2016-12-10T05:15:00Z</updated>
        <content type="html"><![CDATA[<p>This week I gave a talk at the brand new Triangle ReactJS meetup group on how <a href="https://facebook.github.io/jest/">Jest</a> can save developers time.  I was asked afterwards to share the content online for those who missed it.  My talk was mostly demos and wasn’t recorded, so there unfortunately isn’t much to share, but I thought I could write out the basic ideas behind the talk, and share them here.</p>
<h3>What is Jest</h3>
<p>Jest is a JavaScript testing framework built by Facebook to address their internal problems testing JavaScript code.  It was open-sourced in 2014, but unlike Facebook’s other recent high profile JavaScript OSS projects like React, Flux, Relay and GraphQL, it failed to develop much traction in the community and mostly stagnated for 2 years.  That changed in early 2016 when 2 Facebook developers, <a href="https://twitter.com/cpojer">Christoph Pojer</a> and <a href="https://twitter.com/abramov_dmitrii">Dmitrii Abramov</a> began working on improving the project. Over the past year they’ve brought massive improvements to the developer experience of using Jest.</p>
<p>At a more practical level Jest is a test runner with a built in assertion library and support for code coverage, babel transpilation, and module mocking.  It began as a wrapper around [Jasmine][jasmine], an older JavaScript testing library, but has since replaced parts of Jasmine with replacement functionality, while retaining backwards compatibility.</p>
<h3>How Can Jest Save Me Time?</h3>
<p>Jest saves developers  time in 4 main ways:</p>
<ol>
<li><strong>Setup</strong> - Jest is simple to configure</li>
<li><strong>Writing Tests</strong> - Jest provides a method for writing simple UI tests, and makes it easy to port over existing tests</li>
<li><strong>Running Tests</strong> - Jest runs tests in parallel, doesn’t require a browser, and only runs the tests that are affected by the current code changes</li>
<li><strong>Fixing Tests</strong> - Jest gives great error messages, helps you find the failing code, and has other smaller UX features that make it easy to debug your failing tests quickly.</li>
</ol>
<div>
<blockquote class="twitter-tweet" data-lang="en"><p lang="en" dir="ltr">Tonight <a href="https://twitter.com/ben336">@ben336</a> speaks about using <a href="https://twitter.com/hashtag/jest?src=hash">#jest</a> with <a href="https://twitter.com/hashtag/reactjs?src=hash">#reactjs</a> for your testing needs <a href="https://twitter.com/nestraleigh">@nestraleigh</a> <a href="https://t.co/CAV8wZUwFw">pic.twitter.com/CAV8wZUwFw</a></p>&mdash; Tracy Lee | ladyleet (@ladyleet) <a href="https://twitter.com/ladyleet/status/806655476515618822">December 8, 2016</a></blockquote>
</div>
<h3>Setup</h3>
<p>Setting up Jest is extremely straightforward. Here’s a <code>Hello World</code> React Project</p>
<pre><code class="language-json">//package.json
{
  &quot;name&quot;: &quot;simple_example&quot;,
  &quot;version&quot;: &quot;1.0.0&quot;,
  &quot;description&quot;: &quot;A minimal jest testing example&quot;,
  &quot;scripts&quot;: {
    &quot;test&quot;: &quot;jest&quot;
  },
  &quot;dependencies&quot;: {
    &quot;react&quot;: &quot;^15.4.1&quot;
  },
  &quot;devDependencies&quot;: {
    &quot;babel-jest&quot;: &quot;^17.0.2&quot;,
    &quot;babel-preset-es2015&quot;: &quot;^6.18.0&quot;,
    &quot;babel-preset-react&quot;: &quot;^6.16.0&quot;,
    &quot;jest&quot;: &quot;^17.0.3&quot;,
    &quot;react-test-renderer&quot;: &quot;^15.4.1&quot;
  }
}
</code></pre>
<p>In package.json we have 4 dependencies that are part of a normal React project setup, <code>react</code>, the 2 babel presets for using <a href="http://benmccormick.org/2015/09/14/es5-es6-es2016-es-next-whats-going-on-with-javascript-versioning/">es2015</a> syntax, and <code>react-test-renderer</code>, which is a react addon for rendering react for testing, similar to how <code>react-dom</code> renders components for the browser.  We then add <code>jest</code> and <code>babel-jest</code>.  <code>jest</code> provides the test runner, assertions API, mocking capabilities, and cli.  <code>babel-jest</code> is a drop-in dependency that lets Jest integrate with Babel.  Neither require any additional configuration in the normal case. Lets say the rest of our project looks like this:</p>
<pre><code class="language-txt">├── __tests__
│   └── simple-component.spec.js
├── package.json
└── simple-component.js
</code></pre>
<pre><code class="language-javascript">// simple-component.js
import React from 'react';

export const SimpleComponent = () =&gt; &lt;div&gt;
    Hello World
&lt;/div&gt;;
</code></pre>
<pre><code class="language-javascript">// __tests__/simple-component.spec.js
import React from 'react';
import renderer from 'react-test-renderer';
import {SimpleComponent} from '../simple-component';

it('shows Hello World', () =&gt; {
  const component = renderer.create( &lt;SimpleComponent/&gt;);
  let componentJSON = component.toJSON();
  expect(componentJSON.children[0]).toBe('Hello World');
});
</code></pre>
<p>Given this project, we only have to run</p>
<pre><code>yarn # or npm install
jest
</code></pre>
<p>and jest will automatically find our test file and run the test.</p>
<img src="http://benmccormick.org/posts/images/jest-hello-world.gif" class="full-width" alt ="gif of running jest">
<h3>Writing Tests</h3>
<p>Jest provides Snapshot Tests, which are a quick way of writing tests to catch changes in the rendered output of a UI component (or any other serializable content).  <a href="http://benmccormick.org/2016/09/19/testing-with-jest-snapshots-first-impressions/">I’ve written about Snapshot testing before</a>, so I won’t go into depth here.  But snapshot tests are significantly faster to write than traditional assertion based tests, and for the write type of code can provide greater or equal benefit.  This is one area where technically Jest may not save you time.  Instead it may take your team to a place where you’re actually willing to write tests for your UI components for the first time.</p>
<p>There are also a great set of codemods for Jest. <a href="https://github.com/skovhus/jest-codemods">jest-codemods</a> can help you take your existing suite of tests from Mocha, Ava, or tape and translate it over to Jest automatically.  Of course if you were using Jasmine previously, your tests can be migrated without changes. So Jest saves you time by not requiring you to rewrite any tests.</p>
<h3>Running Tests</h3>
<p>Jest runs tests fast by default.  While I’ve seen from comments on my last Jest post and elsewhere that some people may have been able to optimize mocha or AVA to be fast enough that switching to Jest was a downgrade, for most people Jest is going to be faster than whatever they may have been using before.  This is true because of performance reasons (tests run in parallel, and mock out timers to avoid unnecessary waiting), but also because of UX decisions.  Jest is able to use git and node’s modules system to detect what files have changed since the last commit, and which tests are affected by that.  Because of that, it is able to optionally run only the tests that might have changed on each run (<code>jest -o</code>).  Since it is usually able to run tests fast as a result (since it only runs a few at a time), Jest also is able to have an awesome watch mode (<code>jest --watch</code>).  In watch mode, tests rerun as files change, and there are options to target specific tests, run all tests, or fix snapshots as you go.</p>
<img src="http://benmccormick.org/posts/images/jest-watch.gif" class="full-width" alt ="gif of running jest --watch">
<h3>Fixing Tests</h3>
<p>Jest provides 4 main conveniences for fixing tests</p>
<ol>
<li>Error messages have clear formatted diffs, making it easy to know the difference between what was received and expected</li>
<li>Error messages have a clear traceback to the line that failed, either the assertion in the test file, or the exception in the source file</li>
<li>Even though tests run in parallel, Jest makes sure that any console output from the test is placed in line with the test output, making it easy to debug with quick console messages</li>
<li>When running Jest multiple times, Jest runs the tests that failed in the previous run prior to other tests, leading to a faster feedback loop even when not using watch mode</li>
</ol>
<img src="http://benmccormick.org/posts/images/jest-error.png" class="full-width" alt ="gif of running jest --watch">
<h3>More Resources</h3>
<ul>
<li>
<p>Another speakup at Wednesday’s meetup has a Jest related blog post out this week.  Nate Hunzaker blogged about <a href="https://www.viget.com/articles/acceptance-testing-react-apps-with-jest-and-nightmare">using Jest with Nightmare.js for acceptance tests</a></p>
</li>
<li>
<p>If you live in the Triangle area (thats Raleigh/Durham, North Carolina to the rest of the world) make sure to check out the <a href="http://www.meetup.com/trianglereact/">Triangle React meetup</a>.  The plan as I understand it is to do events once a month, alternating project nights and talks.  I believe <a href="https://twitter.com/ladyleet">Tracy</a> is looking for more speakers too, so hit her up if you’re interested.  This time 4 of us spoke for 15-20 minutes, so it isn’t as much preparation as other events where you’re the only speaker.</p>
</li>
</ul>
<h3>Subscribe</h3>
<p>Thanks for taking the time to read this post!  JavaScript development is one of the main topics of this blog, so if you enjoyed the post, please consider subscribing by using the <a href="http://feedpress.me/benmccormick">feed</a>, <a href="http://twitter.com/benmccormickorg">Twitter</a> or my <a href="http://eepurl.com/WFYon">mailing list</a>. If you’re excited about Jest, you also might want to check out my <a href="http://benmccormick.org/2016/09/19/testing-with-jest-snapshots-first-impressions/">post on Jest Snapshots</a>.</p>
]]></content>
        <author>
            <name>Ben McCormick</name>
            <email>ben@benmccormick.org</email>
            <uri>http://benmccormick.org</uri>
        </author>
    </entry>
    <entry>
        <title type="html"><![CDATA[A whole new site]]></title>
        <id>https://benmccormick.org/2016/12/02/whole-new-site/</id>
        <link href="https://benmccormick.org/2016/12/02/whole-new-site/">
        </link>
        <updated>2016-12-02T16:00:00Z</updated>
        <content type="html"><![CDATA[<p>After 2.5 years of stability, this week I moved <a href="http://benmccormick.org">benmccormick.org</a> to a new platform and overhauled the look and feel. Although most readers have seen the site remain relatively stable, this is actually the 5th major revision of the site since it was first created, so this seems like a good time for a quick trip down memory lane.</p>
<p>I first started it as a Django app, wanting to challenge myself to build a blog.  That was so short-lived that the way-back machine never even registered it, and I don’t have any evidence that it ever existed (thankfully).  In December 2012, I moved the blog over to <a href="http://octopress.org/">Octopress</a> a static site generator based on Ruby.  I started out using a very nice stock template:</p>
<img src="http://benmccormick.org/posts/images/oldsite1.png" class="full-width">
<p>and then shortly switched to a version that I mostly did myself based off of the default octopress theme.  This was one of my first attempts to design anything from scratch, and was not particularly pretty:</p>
<img src="http://benmccormick.org/posts/images/oldsite2.png" class="full-width">
<p>I enjoyed Octopress, but spent a lot of time messing around with it (and struggling through the unfamiliar ruby ecosystem), and not a lot of time writing.  So in the spring of 2014 I decided I wanted to switch to a blogging platform where I could write, rather than messing with code.  So I moved my blog to <a href="https://ghost.org/">Ghost</a>, lightly modified a public theme, and began writing about Vim.  It was around this time (2 years and 40 articles in) that I began to attract more readers, and also began to focus more on higher quality technical articles:</p>
<img src="http://benmccormick.org/posts/images/oldsite3.png" class="full-width">
<p>About a year after that I re-introduced some color to the blog after a prolonged absence. The black and white sidebar was traded for a colorful green, and a I began using a mix of blue and red for text emphasis. I also began to focus on making it more clear how to subscribe to the blog, and highlighted the more popular content:</p>
<img src="http://benmccormick.org/posts/images/oldsite4.png" class="full-width">
<p>Ghost was a great blogging platform, but this fall I decided it was time to move off of it.  I was interested in trying some things that didn’t fit into the platform’s more structured approach, and wanted to move the blog to a place where it was no longer losing me money to run.  So I decided to take another look at the static site generator landscape. I looked through the top 12 or so options on <a href="https://www.staticgen.com/">StaticGen</a> and <a href="https://github.com/gatsbyjs/gatsby">Gatsby</a> quickly stood out.  It uses concepts I’m extremely comfortable with (built with React and Webpack!), produces fast server-rendered SPA style sites, and dictates almost nothing about how the site is built.</p>
<p>The site is now built with Gatsby and hosted on Github pages.  I’ve ditched the noisy green sidebar in favor of a simpler text-focused experience and added a small ad at the top of the page to offset some of the costs associated with the blog.  I’m planning on iterating on the design (better organizing and exposing older content, making it simpler to subscribe to the blog, and making it easier for me to add rich content/code examples to posts without relying on 3rd party services), but for right now I’m excited to get back to focusing on writing.</p>
<img src="http://benmccormick.org/posts/images/current_site.png" class="full-width">
<p>Like all software, as this blog has evolved, I’m sure not all of the progress has been forward.  If you see any issues with the new site, feedback and bugfixes are welcome.  Feel free to hit me up on <a href="https://twitter.com/ben336">twitter</a>, comment on this post, or open an issue on the site’s <a href="https://github.com/benmccormick/benmccormickorg/issues">github repo</a>.  Thank you to everyone who has read and supported this site over the past several years.</p>
<h3>More Resources</h3>
<ul>
<li>If you’re interested in <a href="https://github.com/gatsbyjs/gatsby">Gatsby</a> this post on <a href="https://blog.scottnonnenberg.com/practical-gatsby-js/">Practical Gatsby.js</a> by Scott Nonnenberg is excellent.  Its not a how-to, but more of a series of examples of how he deviated from the base Gatsby blog (and why).  I found it really helpful when brainstorming ideas for this site.</li>
</ul>
<h3>Subscribe</h3>
<p>Thanks for taking the time to read this post!  I’m going to be ramping up posts again this winter, so if you have enjoyed my posts, please consider subscribing by using the <a href="http://benmccormick.org/rss/">feed</a>, <a href="http://twitter.com/benmccormickorg">Twitter</a> or my <a href="http://eepurl.com/WFYon">mailing list</a>. You also might want to check out my <a href="http://benmccormick.org/2016/05/02/digging-into-react-choosing-component-styles/">post on choosing which component styles to use in React</a>.</p>
]]></content>
        <author>
            <name>Ben McCormick</name>
            <email>ben@benmccormick.org</email>
            <uri>http://benmccormick.org</uri>
        </author>
    </entry>
    <entry>
        <title type="html"><![CDATA[Testing with Jest Snapshots: First Impressions]]></title>
        <id>https://benmccormick.org/2016/09/19/testing-with-jest-snapshots-first-impressions/</id>
        <link href="https://benmccormick.org/2016/09/19/testing-with-jest-snapshots-first-impressions/">
        </link>
        <updated>2016-09-19T12:41:00Z</updated>
        <content type="html"><![CDATA[<p>Over the past 6 months my team at work has been slowly transitioning a large Backbone application to React.  One of the main goals of the transition has been to build out unit tests as we transition components.  As part of that we switched from using Karma to using Jest for managing our tests.</p>
<p>Our new setup with Jest has several advantages over our previous setup. All Jest tests run through node using a fake DOM implementation.  We don’t need to start up a browser so tests are faster and less flaky [^1].  Jest makes it possible to mock all modules by default [^2], which works well for us since our code base currently contains a large amount of code that is difficult to test for one reason or another.  Jest provides great integration with Babel, which is helpful since all of our Backbone and React code uses ES6 that we transpile for the browser.  Finally Jest provides a wonderful watch mode that runs only the tests that are relevant to the changes you’ve made and makes it easy to see the result.</p>
<p>About a month ago, Jest debuted a new feature: Snapshot testing.  It works a bit differently than a normal unit test.  Instead of executing some code and comparing the output against a value provided by a developer, the first time a test is run, the output passed into the test is saved to a “snapshot file”.  Then when the test is run in the future, the output is compared to the snapshot file.  If the output matches the file, the test passes, if the output is different then the file, the test fails and Jest prints a diff.  We’ve been using Jest snapshots for a few weeks now and I wanted to share my initial impressions.</p>
<h3>What is it like to use a snapshot test ?</h3>
<p>The process for snapshot testing is a bit different than normal tests.  Most snapshot tests look fairly simple.  Something like this example from the <a href="https://github.com/facebook/jest/tree/master/examples/snapshot">Jest repository</a>:</p>
<pre><code class="language-javascript">// Link.react.js
// Copyright 2004-present Facebook. All Rights Reserved.

import React from 'react';

const STATUS = {
  NORMAL: 'normal',
  HOVERED: 'hovered',
};

export default class Link extends React.Component {

  constructor() {
    super();

    this._onMouseEnter = this._onMouseEnter.bind(this);
    this._onMouseLeave = this._onMouseLeave.bind(this);

    this.state = {
      class: STATUS.NORMAL,
    };
  }

  _onMouseEnter() {
    this.setState({class: STATUS.HOVERED});
  }

  _onMouseLeave() {
    this.setState({class: STATUS.NORMAL});
  }

  render() {
    return (
      &lt;a
        className={this.state.class}
        href={this.props.page || '#'}
        onMouseEnter={this._onMouseEnter}
        onMouseLeave={this._onMouseLeave}&gt;
        {this.props.children}
      &lt;/a&gt;
    );
  }

}

// Link.react-test.js  (partial)
// Copyright 2004-present Facebook. All Rights Reserved.
/* eslint-disable no-unused-vars */

'use strict'

import React from 'react';
import Link from '../Link.react';
import renderer from 'react-test-renderer';

it('renders correctly', () =&gt; {
  const tree = renderer.create(
    &lt;Link page=&quot;http://www.facebook.com&quot;&gt;Facebook&lt;/Link&gt;
  ).toJSON();
  expect(tree).toMatchSnapshot();
});

</code></pre>
<p>The first time the test is run, a snapshot file is produced.  In this case, running the previous test produces a snapshot file that looks like this:</p>
<pre><code class="language-javascript">// Link.react-test.js.snap  (partial)
exports[`test renders correctly 1`] = `
&lt;a
  className=&quot;normal&quot;
  href=&quot;http://www.facebook.com&quot;
  onMouseEnter={[Function bound _onMouseEnter]}
  onMouseLeave={[Function bound _onMouseLeave]}&gt;
  Facebook
&lt;/a&gt;
`;
</code></pre>
<p>This gives us a baseline for what we expect the UI to look like.  The snapshot is generated in a folder in your <code>__tests__</code> directory, so that it can be checked into source control.</p>
<p>The next time a test is run, if nothing has changed, the test passes.  However, if we change something (let’s say we add a class), the test fails and shows us a diff.</p>
<pre><code class="language-javascript">// updated link render method

render() {
  return (
    &lt;a
      className={`link-item ${this.state.class}`}
      href={this.props.page || '#'}
      onMouseEnter={this._onMouseEnter}
      onMouseLeave={this._onMouseLeave}&gt;
      {this.props.children}
    &lt;/a&gt;
  );
}
</code></pre>
<pre><code class="language-diff">
# jest output

FAIL  __tests__/Link.react-test.js
 ✕ renders correctly (16ms)

● renders correctly

    Received value does not match the stored snapshot 1.

    - Snapshot
    + Received

      &lt;a
-       className=&quot;normal&quot;
+       className=&quot;link-item normal&quot;
        href=&quot;http://www.facebook.com&quot;
        onMouseEnter={[Function bound _onMouseEnter]}
        onMouseLeave={[Function bound _onMouseLeave]}&gt;
        Facebook
      &lt;/a&gt;

      at Object.&lt;anonymous&gt; (__tests__/Link.react-test.js:14:16)
</code></pre>
<p>We can then choose to accept this change by running <code>jest -u</code> to update the snapshot, or update our code to fix the regression.  If we update the snapshot file, the test will start passing again.</p>
<h3>Snapshot tests are a complement for conventional tests not a replacement</h3>
<p>The first thing that became clear to me while using snapshot testing is that they’re not for everything.  They are optimized for a different case than normal assertion-based tests.</p>
<p>Classic assertion based tests are perfect for testing clearly defined behavior that is expected to remain relatively stable.</p>
<p>Snapshot tests are great for testing less clearly defined behavior that may change often.</p>
<p>Snapshot testing is perfect for things that in the past would have raised concern for “overly brittle” tests that slow development teams down.  The classic example of this (and the main focus of discussion around Jest snapshots so far) is UI testing.</p>
<p>UI components often change in small and trivial ways.  Copy is changed, whitespace is added, a border color is modified. Generally this means that developers have to choose between detailed tests that catch any regression but require constant updates, or less detailed tests that focus on core behaviors but miss smaller regressions.</p>
<p>Snapshot tests provide a new way of approaching these problems in unit tests.  Because they are easy to write and effortless to update, and provide a clear view of what changed after each update, whether it is major or minor.</p>
<p>This isn’t without any disadvantage. Snapshot tests preserve a starting point, but don’t give any indication of developer intent to future developers.  Like any other test, if the initial snapshot passes with bugs, or doesn’t capture the full range of cases, the test won’t adequately cover those behaviors.  But unlike traditional tests, snapshot tests don’t provide specific guidance for what the original developer expected beyond the “actual behavior”.  If there are multiple sub-behaviors that interact to produce output, its not clear which of those are essential, and which are incidental.  That’s not something you want for your critical application logic, especially complicated logic with many subtle cases.  But for UI components and other application elements that are likely to change a lot over time, this is a good set of tradeoffs.</p>
<h3>Snapshot tests are more useful with a healthy code review process</h3>
<p>I’ve pointed out several times now that snapshot tests are easy to update.  One of the downsides of the current design is that they can be almost too easy to update.  When a snapshot test fails, you have the option of modifying the output so that the test passes again, or updating the snapshot to reflect the new output.  Unfortunately, Jest currently provides no granularity for this updating.  Running <code>jest -u</code> to update the snapshots will update all snapshots.  So if  a single change causes many snapshots to break, it can be easy to accidentally update all of them, and possibly difficult to work through the whole diff to find changes.</p>
<p>A robust code review process minimizes these problems.  Because snapshots are checked into source, the diffs in the snapshots are checked into source control.  Viewing diffs in a dedicated code review tool like Github, Bitbucket or Gitlab, it’s easier to see exactly what changed over many files than it might be when updating snapshots from the command line, and if you update a snapshot multiple times in a single branch, you can see the net effect on the snapshot through source control diffs better than you can through Jest.</p>
<h3>Snapshot tests work well with auto-mocking</h3>
<p>Auto-mocking has been one of Jest’s more controversial features.  Prior to version 15, Jest mocked every module used in tests by default.  To run the actual module code, it was necessary to manually unmock each module used or change Jest configurations.  Though it is now disabled by default, auto-mocking actually works very well with snapshot tests.  One problem with tests that rely on generating DOM in React is the fact that most components of any complexity are actually made up of smaller components, that often use external functions with complex logic to determine what to show.  If we fully render everything, changing any of those pieces can break tests for many components, moving us away from the concept of a “unit test”.  If we mock child components and helper functions and then test them individually though, we can focus our tests to only change based on the logic of the individual component being tested.  This is incredibly easy with Jest, and especially helpful in large code bases that don’t have complete test coverage.  Auto-mocking is considered an “advanced feature” of Jest, but it’s not hard to use.  Most mocked modules produce something non-harmful by default, and when its necessary to override, its not difficult to produce something meaningful without getting too involved.  Just add a file with the same name as the file to be mocked into a <code>__mocks__</code> folder in that directory, and give the mocked module the same interface as the mocked component.  You can either write it from scratch or use <a href="http://facebook.github.io/jest/docs/api.html#jest-genmockfrommodule-modulename">jest.genMockFromModule</a> as a starting place.</p>
<h3>Summary</h3>
<p>I’m impressed by Jest snapshots.  When combined with React, they’re providing my first non-frustrating experience unit testing UI components.  I’m excited to use them more going forward, and will be interested to see how they evolve from here.</p>
<hr>
<h3>Extra: A few miscellaneous Jest Thoughts</h3>
<ul>
<li>The UI output from Jest 15 tests is the best I’ve ever seen from a testing framework.  Aside from the nice diffs on snapshots, they do a good job explaining how output differed from expectations in assertion based tests, and communicating context for test failures, warnings and logging messages.  They also give great guidance when making configuration changes:</li>
</ul>
<div style="display:flex; justify-content:center">
<blockquote class="twitter-tweet" data-lang="en"><p lang="en" dir="ltr"><a href="https://twitter.com/cpojer">@cpojer</a> This is lovely, thank you! <a href="https://t.co/CX1v11CAVc">pic.twitter.com/CX1v11CAVc</a></p>&mdash; Ben McCormick (@ben336) <a href="https://twitter.com/ben336/status/772906536154894336">September 5, 2016</a></blockquote>
</div>
<ul>
<li>
<p>I’ve also been super impressed with Jest’s watch mode in Jest 15.  <code>--watch</code> makes it easy to focus on a few files or run tests on all files, and stays up to date as you change code.  If you haven’t worked with Jest in a while, the developer experience alone makes it worth trying out.</p>
</li>
<li>
<p>One potential future annoyance with snapshot tests:  The snapshot format can’t be iterated on without breaking all current tests.  Make sure not to mix functional changes with Jest updates!</p>
</li>
</ul>
<div style="display:flex; justify-content:center">
<blockquote class="twitter-tweet" data-cards="hidden" data-lang="en"><p lang="en" dir="ltr">We&#39;ll update the snapshot format sometimes in minor/major releases. When updating Jest, please update snapshots<br><br>See <a href="https://t.co/gPE63dMz8P">https://t.co/gPE63dMz8P</a></p>&mdash; Christoph Pojer (@cpojer) <a href="https://twitter.com/cpojer/status/776623521069805568">September 16, 2016</a></blockquote>
</div>
<h3>More Resources</h3>
<ul>
<li>
<p>Randy Coulman has a <a href="http://randycoulman.com/blog/2016/09/06/snapshot-testing-use-with-care/">nice article</a> on some of the reasons to be careful about embracing snapshot testing.  He makes good points about the requirement of human involvement in verifying a change in time-crunched situations and also the potential value of snapshot tests for legacy code.</p>
</li>
<li>
<p>My team uses a mix of <a href="https://github.com/airbnb/enzyme">enzyme</a> and snapshot tests for unit testing React Components.  <a href="https://github.com/trayio/enzyme-to-json?utm_content=buffer6b78b&amp;utm_medium=social&amp;utm_source=twitter.com&amp;utm_campaign=buffer">This repo</a> combines them, allowing you to use enzyme to generate the snapshot output to diff against rather than the renderer provided by Jest. I personally haven’t felt the need to integrate these two tools, but if your team uses enzyme and wants consistency/fewer (used) dependencies, this could be a cool option.</p>
</li>
<li>
<p>Finally here’s <a href="https://blog.grommet.io/post/2016/09/01/how-we-landed-on-jest-snapshot-testing-for-javascript">another article</a> on how Snapshot testing convinced one team to migrate to Jest from Tape</p>
</li>
</ul>
<h3>Subscribe</h3>
<p>Thanks for taking the time to read this post!  JavaScript development is one of the main topics of this blog, so if you enjoyed the post, please consider subscribing by using the <a href="http://feedpress.me/benmccormick">feed</a>, <a href="http://twitter.com/benmccormickorg">Twitter</a> or my <a href="http://eepurl.com/WFYon">mailing list</a>. You also might want to check out my <a href="http://benmccormick.org/2016/05/02/digging-into-react-choosing-component-styles/">post on choosing which component styles to use in React</a>.</p>
<p>[^1]: PhantomJS was a tremendous source of pain in our Karma setup.
[^2]: This used to be the default setting, with Jest 15 it can be configured to work that way.</p>
]]></content>
        <author>
            <name>Ben McCormick</name>
            <email>ben@benmccormick.org</email>
            <uri>http://benmccormick.org</uri>
        </author>
    </entry>
    <entry>
        <title type="html"><![CDATA[Quick Tip: Take advantage of lodash collections]]></title>
        <id>https://benmccormick.org/2016/06/26/quick-tip-take-advantage-of-lodash-collections-2/</id>
        <link href="https://benmccormick.org/2016/06/26/quick-tip-take-advantage-of-lodash-collections-2/">
        </link>
        <updated>2016-06-26T21:27:55Z</updated>
        <content type="html"><![CDATA[<p>One of the more frustrating things about using JavaScript in the browser is the number of different collection types that you need to deal with.  When using native APIs and 3rd party libraries, it’s easy to encounter 3 or more different types of collections, including <a href="https://developer.mozilla.org/en-US/docs/Web/API/NodeList">NodeLists</a>, <a href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLCollection">HTMLCollections</a>, <a href="https://learn.jquery.com/using-jquery-core/jquery-object/">jQuery Objects</a>, and plain arrays.</p>
<pre><code class="language-javascript">let a = document.querySelectorAll('div')
a instanceOf NodeList //true

let b = document.getElementsByTagName('div')
b instanceOf HTMLCollection //true

let c = $('div')
c instanceOf jQuery // true

let d = ['button1', 'button2', 'button3'].map(id =&gt; document.getElementById(id));
d instance of Array //true
</code></pre>
<p>This ends up mattering in practice because not every function that is available on Array is available on NodeList, HTMLCollections, and jQuery objects.</p>
<pre><code class="language-javascript">let ids = document.querySelectorAll('div').map(el =&gt; el.id)
// Uncaught TypeError: document.querySelectorAll(...).map is not a function

ids = document.getElementsByTagName('div').map(el =&gt; el.id)
// Uncaught TypeError: document.getElementsByTagName(...).map is not a function

let numDivs = $('div').reduce((count, el) =&gt; count + 1, 0);
// Uncaught TypeError: $(...).reduce is not a function
</code></pre>
<p>Since we can’t use native array methods on these alternate collections, we end up having to be very careful about knowing where we’ve retrieved data from, and how to convert those collections or how to work around their limitations.</p>
<p>It’s useful to know about these distinctions, but in practice dealing with them is a pain.  One of the nice properties of <a href="https://lodash.com/docs">lodash</a> is that it abstracts over these incompatibilities.</p>
<pre><code class="language-javascript">let ids = _.map(document.querySelectorAll('div'), el =&gt; el.id);
// ['container', 'left-box', 'right-box']

ids = _.map(document.getElementssByTagName('div'), el =&gt; el.id);
// ['container', 'left-box', 'right-box']

let numDivs = _.reduce($('div'), (count, el) =&gt; count + 1, 0));
// 3
</code></pre>
<p>For methods that iterate over a collection lodash treats all array-like objects (essentially anything with a length property) the same and iterates over their numerical properties from 0 to length-1.  This provides a nice consistency when working with DOM APIs and removes the mental overhead from managing their inconsistencies.</p>
<h3>Subscribe</h3>
<p>Thanks for taking the time to read this post!   JavaScript development is one of the main topics of this blog, so if you enjoyed the post, please consider subscribing by using the <a href="http://feedpress.me/benmccormick">feed</a>, <a href="http://twitter.com/benmccormickorg">Twitter</a> or my <a href="http://eepurl.com/WFYon">mailing list</a>. You also might want to check out my post <a href="http://benmccormick.org/2014/11/12/underscore-vs-lodash/">comparing lodash and underscore</a>.  I’m also going to be starting a new series of posts soon diving into lodash more in depth.</p>
]]></content>
        <author>
            <name>Ben McCormick</name>
            <email>ben@benmccormick.org</email>
            <uri>http://benmccormick.org</uri>
        </author>
    </entry>
    <entry>
        <title type="html"><![CDATA[What are mutable and immutable data structures?]]></title>
        <id>https://benmccormick.org/2016/06/04/what-are-mutable-and-immutable-data-structures-2/</id>
        <link href="https://benmccormick.org/2016/06/04/what-are-mutable-and-immutable-data-structures-2/">
        </link>
        <updated>2016-06-04T21:52:52Z</updated>
        <content type="html"><![CDATA[<p>Sometimes concepts and ideas slowly grow in a programming community, sometimes they seem to appear in a flash.  For the first several years I wrote JavaScript, I don’t recall ever seeing anything written online about immutable data.  Since React hit the scene in the last 2 years however, articles mentioning mutable and immutable data seem to have multiplied, as have libraries like Immutable.js and alternate front end languages like Elm that allow users to “use immutable data”.  I’m not going to address those libraries, but thought it would be useful to throw out a quick primer on what immutable data actually is, how it differs from mutable data, and why anyone cares.</p>
<p>A mutable object is an object whose state can be modified after it is created.  An immutable object is an object whose state cannot be modified after it is created.  Examples of native JavaScript values that are immutable are numbers and strings.  Examples of native JavaScript values that are mutable include objects, arrays, functions, classes, sets, and maps.</p>
<h3>Implications of mutable object</h3>
<p>So why does this matter?  Consider the following code examples:</p>
<pre><code class="language-javascript">let a = {
    foo: 'bar'
};

let b = a;

a.foo = 'test';

console.log(b.foo); // test
console.log(a === b) // true
</code></pre>
<pre><code class="language-javascript">let a = 'test';
let b = a;
a = a.substring(2);

console.log(a) //st
console.log(b) //test
console.log(a === b) //false
</code></pre>
<pre><code class="language-javascript">let a = ['foo', 'bar'];
let b = a;

a.push('baz')

console.log(b); // ['foo', 'bar', 'baz']
console.log(a === b) // true
</code></pre>
<pre><code class="language-javascript">let a = 1;
let b = a;
a++;

console.log(a) //2
console.log(b) //1
console.log(a === b) //false
</code></pre>
<p>What we see is that for mutable values, updating state applies across all <em>references</em> to that variable.  So changing a value in one place, changes it for all references to that object.  For the immutable data types, we have no way of changing the internal state of the data, so the reference always gets reassigned to a new object.  The biggest implication of this is that for immutable data, equality is more reliable since we know that a value’s state won’t be changed out from under us.</p>
<p>Finally, its worth noting that it’s still possible to treat JavaScript objects as immutable.  This can first be done through <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/freeze">Object.freeze</a>, which shallowly renders a JavaScript object immutable.  But it can also be done with programmer discipline.  If we want to rely on object’s being immutable, it’s possible to enforce that all object updates are done through something like
<code>Object.assign(a, {foo: 'bar'})</code> rather than <code>a.foo = 'bar'</code>, and all array updates are done through functions that generate new arrays like <code>Array.prototype.map</code>, <code>Array.prototype.filter</code>, or <code>Array.prototype.concat</code>, rather than mutating methods like <code>Array.prototype.push</code>, <code>Array.prototye.pop</code>, or <code>Array.prototype.sort</code>.  This is less reliable without language level constraints, but has become popular in the React ecosystem for dealing with data for folks who don’t want to introduce abstractions like Immutable.js.</p>
<h3>Subscribe</h3>
<p>Thanks for taking the time to read this post!  JavaScript development is one of the main topics of this blog, so if you enjoyed the post, please consider subscribing by using the <a href="http://feedpress.me/benmccormick">feed</a>, <a href="http://twitter.com/benmccormickorg">Twitter</a> or my <a href="http://eepurl.com/WFYon">mailing list</a>. You also might want to check out my post on <a href="http://benmccormick.org/2015/09/14/es5-es6-es2016-es-next-whats-going-on-with-javascript-versioning/">explaining the different version names of the JavaScript language</a>.</p>
]]></content>
        <author>
            <name>Ben McCormick</name>
            <email>ben@benmccormick.org</email>
            <uri>http://benmccormick.org</uri>
        </author>
    </entry>
    <entry>
        <title type="html"><![CDATA[Digging Into React: Choosing Component Styles]]></title>
        <id>https://benmccormick.org/2016/05/02/digging-into-react-choosing-component-styles/</id>
        <link href="https://benmccormick.org/2016/05/02/digging-into-react-choosing-component-styles/">
        </link>
        <updated>2016-05-02T02:32:36Z</updated>
        <content type="html"><![CDATA[<p>Over the past month I’ve been building my first production features using React.  One of the first things I’ve noticed is the amount of choices that come into a new React project.  A lot of this is about the ecosystem around React (Webpack vs Browserify? Redux vs Relay? Do I need CSS modules or Immutable.js?) but many of the choices are just part of the library, figuring out the best, or at least a consistent, way to do things.</p>
<p>One such choice is the syntax for defining components that you choose to use.  In React, you can define components in at least 3 different styles: the React.createClass style, the ES6 class style, and the pure functional style [^1]. Each has some advantages and disadvantages.</p>
<h3>React.createClass</h3>
<p>React.createClass is the original style for defining React components, and is still the preferred style in the React documentation.</p>
<p>Here’s what a theoretical SaveButton component looks like in this style.  It is a simple component that listens for clicks and then uses a separate dispatcher object to send a request to save the data on the page.  After saving the button will either show some specified saved text or “Saved”.</p>
<pre><code class="language-javascript">import React from ‘react’;
import {dispatcher} from ‘./lib/dispatcher’;

export const SaveButton = React.createClass({

    propTypes: {
        //text to show after the component is saved
        savedText: React.PropTypes.string.isRequired,
        //primary text to show on the button
        text: React.PropTypes.string.isRequired,
    },

    getDefaultProps() {
        return {
             savedText: ‘Saved’,
        };
    },

    getInitialState() {
        return { saved: false };
    },

    save() {
        dispatcher.sendMessage(‘saveData’);
        this.setState({saved: true});
    },

    render() {
        let {text, savedText} = this.props;
        return (&lt;span className=“button” onClick={this.save}&gt;
           {this.state.saved ? savedText : text}
        &lt;/span&gt;);
    },
});
</code></pre>
<p>One of the best things about this style is its cohesive nature.  Everything about the component is described as a single object passed to React.createClass.  Since it is just an object that React processes, it is also able to accommodate more usage styles than ES6 classes and functional components.  Specifically we can use <a href="https://facebook.github.io/react/docs/reusable-components.html#mixins">mixins</a> and add declarative properties like propTypes directly to the component definition.</p>
<p>The downside of the createClass approach is the custom nature of it.  External tools can’t inspect a component declaration and know what functions and methods will be available on the final component without either some deep inspection of the React source code or pre-existing knowledge of React.createClass that somebody has to document and maintain.</p>
<h3>ES6 Classes</h3>
<p>Last March, with React v0.13, the React team introduced a second syntax for React components using ES6 classes.  The constraints of the ES6 class definition change the component API in a few ways.  With ES6 classes there is no way to add properties to the class property as part of the main definition, they need to be added afterwards [^2].  Some niceties that are possible with React.createClass don’t work with ES6 classes as well.  Mixins aren’t possible, and React will no longer “autobind” your functions to the component instance, so when passing class methods as callbacks in your components it is necessary to bind it to the current context, either by using arrow functions like
<code>&lt;span onClick= {() =&gt; this.save()} &gt;</code> or by binding the function like <code>this.save = this.save.bind(this)</code>.</p>
<pre><code class="language-javascript">import React from ‘react’;
import {dispatcher} from ‘./lib/dispatcher’;

export class SaveButton extends React.Component {

    constructor(props) {
        super(props);
        this.state = { saved: false };
    }

    save() {
        dispatcher.sendMessage(‘saveData’);
        this.setState({saved: true});
    },

    render() {
        let {text, savedText} = this.props;
        return (&lt;span className=“button” onClick={() =&gt;this.save()}&gt;
           {this.state.saved ? savedText : text}
        &lt;/span&gt;);
    },
});

SaveButton.propTypes = {
    //text to show after the component is saved
    savedText: React.PropTypes.string.isRequired,
    //primary text to show on the button
    text: React.PropTypes.string.isRequired,
};

SaveButton.defaultProps = {
    savedText: ‘Saved’,
};
</code></pre>
<p>While this approach makes some syntactic compromises and loses mixins, it has the advantage of standardization and tooling support.  A good JavaScript tool can easily tell that a SaveButton should have render and save methods, as well as detecting the methods it inherits from React.Component.  This is useful for things like auto-complete and linting, as well as (theoretically) run-time performance.</p>
<h3>Pure Functional Components</h3>
<p>Last fall with React 0.14, React added a 3rd component style.  Functional components dispose of many of the secondary features of React, and focus on the <code>render</code> function.  They are the least powerful of all the component syntaxes.  In addition to losing mixins, pure functional components don’t have the life-cycle functions of the class based syntaxes and also don’t have any internal state.  For these components, all state must be managed externally through something like Redux, or parent components that do have state.</p>
<pre><code class="language-javascript">import React from ‘react’;
import {dispatcher} from ‘./lib/dispatcher’;

export const SaveButton = ({text, savedText, isSaved, setSaved}) =&gt; {
    const save = () =&gt;{
        dispatcher.sendMessage(‘saveData’);
        setSaved();
    },
    return (&lt;span className=“button” onClick={save}&gt;
       {isSaved ? savedText : text}
    &lt;/span&gt;);
};

SaveButton.propTypes = {
    //text to show after the component is saved
    savedText: React.PropTypes.string.isRequired,
    //primary text to show on the button
    text: React.PropTypes.string.isRequired,
    // has the data already been saved?
    isSaved: React.PropTypes.bool.isRequired,
    // a function to update the application state and mark the page as saved
    setSaved: React.PropTypes.func.isRequired,
};

SaveButton.defaultProps = {
    savedText: ‘Saved’,
};
</code></pre>
<p>Despite being the least powerful of the 3 component styles, functional components do have some advantages.  First of all, they’re very simple.  It is easy to see what is going on with them, and easy for React to optimize for them.  Like ES6 classes, they’re easy to understand for 3rd party tools since they’re “just functions”, and easy to explain to new developers for the same reason.  They also work well with systems like Redux which already encourages pulling state out of components into global stores.</p>
<h2>Choosing a component style</h2>
<p>So given these 3 styles, how do you choose which style to use for a component?  Balance a desire for consistency with a respect for the <a href="https://en.wikipedia.org/wiki/Rule_of_least_power">Principle of Least Power</a>.</p>
<p>For consistency purposes, don’t use more than 2 of these styles within a single project.  This mostly breaks down to “don’t use createClass and ES6 classes” together in the same project.  There are significant differences in capability and complexity between the first 2 styles and functional components. But the class based styles are similar enough that using both adds complexity but fails to do much in terms of signaling intent.  Switching between 2 different styles of communicating a concept should also indicate a meaningful difference in intent.</p>
<p>Of course the most consistent approach would be to always use createClass, since it is the most powerful and any component that can be implemented in the other 2 styles can be implemented using createClass.  This is where the principle of least power comes in.  Here is Tim Berners-Lee’s initial description of that principle:</p>
<blockquote>
<p>Computer Science in the 1960s to 80s spent a lot of effort making languages which were as powerful as possible. Nowadays we have to appreciate the reasons for picking not the most powerful solution but the least powerful. The reason for this is that the less powerful the language, the more you can do with the data stored in that language. If you write it in a simple declarative from, anyone can write a program to analyze it in many ways. The Semantic Web is an attempt, largely, to map large quantities of existing data onto a common language so that the data can be analyzed in ways never dreamed of by its creators. If, for example, a web page with weather data has RDF describing that data, a user can retrieve it as a table, perhaps average it, plot it, deduce things from it in combination with other information. At the other end of the scale is the weather information portrayed by the cunning Java applet. While this might allow a very cool user interface, it cannot be analyzed at all. The search engine finding the page will have no idea of what the data is or what it is about. This the only way to find out what a Java applet means is to set it running in front of a person.</p>
</blockquote>
<p>The less powerful react components styles are the more readable styles, both for humans and computers. That readability also limits the classes of errors and unexpected behaviors we can enact. So we should strive for simple components where we can, while balancing that with our desire for consistency.</p>
<p>For projects looking into this, there are a few simple questions that you can answer to decide which style to use.</p>
<ol>
<li>Do you need to integrate with non-React libraries that modify the DOM?</li>
<li>Do you need to manage state within your components (IE are you not using an external state management library like Redux)?</li>
<li>Do you need to use mixins for anything in your project?</li>
</ol>
<p>If you answered yes to any of these questions, then you need to include a class based component style in your options for your projects.  If you answered yes to #3, then you will need to use React.createClass.</p>
<p>Once you’ve made those decisions at the project level, the decisions are easy for an individual component.  If you answered no to all of the questions above (unlikely for a large project, but possible), you should always use functional components.  If not, you can ask the same 3 questions for each new component.  If the answer to all of the questions are no for a component, use a functional component, otherwise use the class based style you’ve chosen for your project.</p>
<h3>More Resources</h3>
<ul>
<li><a href="https://facebook.github.io/react/docs/reusable-components.html#es6-classes">The React documentation</a> is the best place to look at the benefits and tradeoffs of the different component styles</li>
<li><a href="http://jamesknelson.com/should-i-use-react-createclass-es6-classes-or-stateless-functional-components/">James Nelson wrote a similar guide last year</a> focused on the decision tree of what style to use for a component.  He dismisses the createClass style completely and has a similar but slightly different set of questions to ask.</li>
<li><a href="https://github.com/facebook/react/issues/5677">This github thread</a> makes the important distinction that functional components are not yet optimized in any special way, though they may be in the future.</li>
</ul>
<h3>Subscribe</h3>
<p>Thanks for taking the time to read this post!  JavaScript development is one of the main topics of this blog, so if you enjoyed the post, please consider subscribing by using the <a href="http://feedpress.me/benmccormick">feed</a>, <a href="http://twitter.com/benmccormickorg">Twitter</a> or my <a href="http://eepurl.com/WFYon">mailing list</a>. You also might want to check out my post on <a href="http://benmccormick.org/2016/01/08/reusable-code-patterns/">reusable code patterns</a>.</p>
<p>[^1]: Technically you can also use an ES5 class based style, but I’m going to ignore that.  It is not a common idiom for React programs as far as I can tell.</p>
<p>[^2]: There is a proposal for adding static properties to ES6 classes, but it is still in early stages right now and is not guaranteed to end up as part of the ECMAScript spec.</p>
]]></content>
        <author>
            <name>Ben McCormick</name>
            <email>ben@benmccormick.org</email>
            <uri>http://benmccormick.org</uri>
        </author>
    </entry>
    <entry>
        <title type="html"><![CDATA[Ack Tips]]></title>
        <id>https://benmccormick.org/2016/04/30/ack-tips/</id>
        <link href="https://benmccormick.org/2016/04/30/ack-tips/">
        </link>
        <updated>2016-04-30T15:48:25Z</updated>
        <content type="html"><![CDATA[<p><em>Last summer I briefly considered creating a separate blog focused on command line tools.  The idea is that the articles would be shorter and more practical than the longer pieces I write here.  I ended up scrapping the idea, but had written a few posts on one of my favorite command line tools Ack, so I wanted to preserve them here, as a single, longer piece, separated into 3 “tips”</em></p>
<h3>#1: Prefer ack or ag to grep</h3>
<p><a href="http://linux.die.net/man/1/grep">grep</a> is one of the most well known unix utilties.  If you’ve had any exposure to the command line at all, you’ve probably searched for something using grep.  grep’s standalone use is searching for content inside of files, but with Unix’s piping philosophy it is useful as a general search and filtering tool.  Originally created for Version 4 Unix 42 years ago, it has been a staple of *Nix operating systems ever since.   If you’ve been using it for even half that time, I’m sure a blog post isn’t enough to convince you to stop.  But for the rest of us, there’s an opportunity to do better.</p>
<p><a href="http://beyondgrep.com/">ack</a> and <a href="https://github.com/ggreer/the_silver_searcher">ag</a> <sup id="fnref:1"><a href="#fn:1">1</a></sup> are similar projects with the same goal: providing a better experience than grep when searching directories of files, particularly for programmers.  The key selling points:</p>
<ol>
<li>Improved speed when searching through directories</li>
<li>Ignores version control and binary files by default when searching</li>
<li>Easy filtering by file-type</li>
<li>A cleaner API for searching directories, without adding complexity to the single file case</li>
</ol>
<p>This is easiest to see by comparing commands.</p>
<h4>Searching for “javascript” in a file</h4>
<pre><code>grep javascript foo.txt
</code></pre>
<pre><code>ack javascript foo.txt
</code></pre>
<h4>Searching every file in the current directory for “javascript”</h4>
<pre><code>grep -r javascript .
</code></pre>
<pre><code>ack javascript
</code></pre>
<h4>Searching every file in the current directory for “javascript”, excluding a .git directory</h4>
<pre><code>grep -r javascript . $(find . -type f | grep -v '\.git')
</code></pre>
<pre><code>ack javascript
</code></pre>
<h4>Searching every HTML file in the current directory for “javascript”, excluding a .git directory</h4>
<pre><code>grep -r javascript . $(find . -name '*.html' -or -name '*.htm'| grep -v '\.git')
</code></pre>
<pre><code>ack --html javascript
</code></pre>
<p>Basically, as the complexity of what you’re trying to do increases in terms of multiple files, the overhead of using grep increases proportionately.  Because ack and ag are optimized for common use cases, they’re able to scale much better.</p>
<h3>#2: Use Ack to get familiar with a new codebase</h3>
<p><a href="http://beyondgrep.com/">ack</a> is an incredibly useful tool when approaching a new codebase, especially if you’re focused on a specific feature. It allows you to quickly get a view of the codebase, and then zero in on the functionality you’re interested in.  To see how this works, let’s use jQuery’s <a href="https://github.com/jquery/jquery">source repo</a> as an example, and see what happens if we want to get a look at how it implements ajax.</p>
<pre><code class="language-bash">❯ git clone git@github.com:jquery/jquery.git
❯ cd jquery
</code></pre>
<p>We can start by trying to get a general idea of the size of the codebase.  Running <code>ack -f</code> to show all files in the directory will immediately overrun our terminal, so we can get a file count using <code>wc</code> instead</p>
<pre><code class="language-bash">❯ ack -f |wc -l
    249
</code></pre>
<p>Ok thats a good amount of files.  But how many of them are actually source files?  We can filter down to just the javascript files.</p>
<pre><code class="language-bash">❯ ack -f --js |wc -l
    155
</code></pre>
<p>But thats probably still a bit high, since not all of the JavaScript files are source files.  A quick <code>ls</code> shows that we probably want to filter down to the src directory.</p>
<pre><code class="language-bash">❯ ack -f --js src |wc -l
    92
</code></pre>
<p>Ok so now we’re down to 92 source files.  Still a bit much, but its probably worth printing them with <code>ack -f --js src</code> at this point to get an idea of the directory structure.  When we do that, we can see there’s an ajax folder, which is probably what we’re interested in.  To make sure we’re not missing related files, we can continue on to searching for files with ajax in the file name directly.</p>
<pre><code class="language-bash">❯ ack -g --js ajax src
    src/ajax/jsonp.js
    src/ajax/load.js
    src/ajax/parseJSON.js
    src/ajax/parseXML.js
    src/ajax/script.js
    src/ajax/var/location.js
    src/ajax/var/nonce.js
    src/ajax/var/rquery.js
    src/ajax/xhr.js
    src/ajax.js
    src/event/ajax.js
</code></pre>
<p>That gets us down to 11 files to look at.  But we might be getting a bit greedy.  Not every file related to ajax may have ajax in the file path.  We can use the <code>-l</code> option of ack to display the list of files that contain ajax somewhere in their text.</p>
<pre><code class="language-bash">❯ ack --js -l ajax src
    src/ajax/jsonp.js
    src/ajax/load.js
    src/ajax/script.js
    src/ajax/xhr.js
    src/ajax.js
    src/event/ajax.js
    src/jquery.js
    src/manipulation/_evalUrl.js
    src/serialize.js
</code></pre>
<p>Ok that adds 3 additional files with ajax references.  But its not clear that they’re relevant to jQuery’s ajax implementation, it may just be a file reference or comment.  Lets use ack to get a quick look at how ajax is referenced in those files.  This part gets a bit more complicated.  We can use ack’s <code>-v</code> option to invert our matching and find non-matching inputs, then use unix piping to filter our previous command.</p>
<pre><code class="language-bash">❯ ack --js -l ajax src |ack -v ajax
    src/jquery.js
    src/manipulation/_evalUrl.js
    src/serialize.js
</code></pre>
<p>Now we can use ack’s <code>-x</code> argument to search the files piped in through standard input.</p>
<pre><code>❯ ack --js -l ajax src |ack -v ajax|ack -x ajax

    src/jquery.js
    20:     &quot;./ajax&quot;,
    21:     &quot;./ajax/xhr&quot;,
    22:     &quot;./ajax/script&quot;,
    23:     &quot;./ajax/jsonp&quot;,
    24:     &quot;./ajax/load&quot;,
    25:     &quot;./event/ajax&quot;,

    src/manipulation/_evalUrl.js
    2:      &quot;../ajax&quot;
    6:      return jQuery.ajax({
    9:              // Make this explicit, since user can override this through ajaxSetup (#11264)

    src/serialize.js
    61:             traditional = jQuery.ajaxSettings &amp;&amp; jQuery.ajaxSettings.traditional;
</code></pre>
<p>So we can see pretty quickly that these files are safe to ignore in terms of understanding how ajax works in jQuery.  They’re just module loads, an actual call to the ajax method for other purposes, and settings serialization. It is useful to note that <code>src/ajax</code> is loaded into the main jQuery file first. Its probably worth looking at it as the starting point for our investigation. We’re well on our way to diving into the ajax functionality, able to focus on 11 of the 249 files in the repo immediately, already knowing how those files are loaded into the main library.</p>
<p>This was just a simple example.  Whenever you’re spelunking into new code territory, consider using ack to get your bearings.  Things go a lot faster when you know the lay of the land in advance.</p>
<h3>#3: Take advantage of Ack’s configurability</h3>
<p>One of the nice things about <a href="http://beyondgrep.com/">ack</a> is the fact that it takes an <code>.ackrc</code> configuration file <sup id="fnref:2"><a href="#fn:2">2</a></sup>. These files can be scoped at a directory level, a user level or at a root level, and mirror the options available on the executable itself.  This allows you to extend and customize acks behavior in 3 primary ways.</p>
<h4>a. Add new filetypes, and bundle existing ones</h4>
<p>One of ack’s most useful features is the ability to add a <code>--&lt;filetype&gt;</code> flag to your searches to restrict your searches to a specific filetype.   ack comes with 75 builtin types including almost all common languages.  But those aren’t always good enough.  To handle obscure languages, and not so obscure syntaxes like handlebars templates, ack lets you define new filetypes.  You’re also able to modify existing filetypes to add additional file extensions to include under that filetype.  So for instance my ackrc includes these lines:</p>
<pre><code>--type-add
hbs=hbs
--type-add
js=js,es6
</code></pre>
<p>The first 2 lines allow me to specifically search handlebars files, which are where all of the html content for my work projects is stored.  The next 2 lines include es6 files in my JavaScript searches, useful since I append JavaScript files that I intend to process with <a href="https://babeljs.io/">Babel</a> with the <code>.es6</code> extenstion.  Customizing the js extension allows me to search all of my JavaScript together.  You can also define richer types in ackrc <a href="http://beyondgrep.com/documentation/ack-2.14-man.html#defining_your_own_types">based on file names using regular expressions or direct name matching</a>.</p>
<h4>b. Set default options</h4>
<p>Any option that the ack executable takes can have a default set or changed in an ackrc file.  This is mainly useful for the display option.  By default ack groups matches from different files and gives the file information above each group of matches.  It also shows all output in color.  Any of those things can be disabled or changed in your ackrc file.</p>
<h4>c. Exclude unwanted directories or files</h4>
<p>Oftentimes there are a predictable group of files that you may want to ignore in searches.  Perhaps you have a build directory that mirrors your source code, or documentation files mingled with your source.  You can put <code>--ignore-directory</code> or <code>--ignore-file</code>.  Ignore directory takes a directory name, while ignore-file takes matches in the same format as the custom filetypes mentioned above.</p>
<p>If you’re starting to use ack, don’t miss the chance to make your searches even more efficient by removing any rough edges with an <code>.ackrc</code>.</p>
<h4>Installation Instructions</h4>
<ul>
<li><a href="http://beyondgrep.com/install/">ack</a></li>
<li><a href="https://github.com/ggreer/the_silver_searcher#installing">ag</a></li>
</ul>
<h3>Subscribe</h3>
<p>Thanks for taking the time to read this post!  Using tools efficiently is one of the main topics of this blog, so if you enjoyed the post, please consider subscribing by using the <a href="http://feedpress.me/benmccormick">feed</a>, <a href="http://twitter.com/benmccormickorg">Twitter</a> or my <a href="http://eepurl.com/WFYon">mailing list</a>. You also might want to check out my articles on <a href="http://benmccormick.org/learning-vim-in-2014/">Vim</a>.</p>
<div class="footnotes">
<ol>
    <li class="footnote" id="fn:1">
    <p>
       ack came first; ag was created as a faster version of ack.  ack is written in perl, making it more portable, and has a few more configuration options.  ag is written in C and is generally faster.  Your choice may vary depending on your use case.
    </p>
    <a href="#fnref:1" title="return to article"> ↩</a>
    </li>
    <li class="footnote" id="fn:2">
        <p>
       This is also one of the main traits that separates ack from <a href="https://github.com/ggreer/the_silver_searcher">ag</a>.
        </p>
        <a href="#fnref:2" title="return to article"> ↩</a></p>
    </li>
</ol>
</div>
]]></content>
        <author>
            <name>Ben McCormick</name>
            <email>ben@benmccormick.org</email>
            <uri>http://benmccormick.org</uri>
        </author>
    </entry>
    <entry>
        <title type="html"><![CDATA[Stability vs Decline]]></title>
        <id>https://benmccormick.org/2016/03/09/stability-vs-decline/</id>
        <link href="https://benmccormick.org/2016/03/09/stability-vs-decline/">
        </link>
        <updated>2016-03-09T06:04:39Z</updated>
        <content type="html"><![CDATA[<p>My post on <a href="http://benmccormick.org/2016/03/07/the-sad-state-of-the-backbone-ecosystem/">the sad state of the Backbone ecosystem</a> from this weekend was surprisingly popular.  I got a lot of responses pointing out <a href="https://twitter.com/ben336/status/707063566940016645">some things I got wrong</a>, sharing my concerns, or pushing back on my main points.  Objections to the post came in 2 primary forms, which I want to quickly address.  The first concern is that the Backbone ecosystem doesn’t matter. The second concern is that the trend I’m identifying as decline and decay is actually stability.</p>
<h3>Does Backbone’s ecosystem matter?</h3>
<p>The first concern came in 2 main forms.  The first (and more polite) form was from commenters who shared their experience and said that they’d found Backbone’s core to be enough when combined with their own code.  The second group was a generalization of that, effectively saying that Backbone is a minimal framework, and <strong>real programmers</strong> can write their own code on top of that.  I’m sympathetic to the first framing, much less so to the second.</p>
<p>One of the beauties of Backbone is that it can be used in a variety of ways.  Its small and simple enough that you can pull it in and use only part of it (maybe just the models or event system for instance), but it has been scaled to be used for large web applications like Trello, Rdio, Backbone, Bitbucket and others. Some of those use cases quite frankly, don’t need anything else most of the time.  If you’re writing a very simple single screen piece of interactive behavior with Backbone, you don’t need any special extra libraries for that.</p>
<p>I personally work on a large scale web application (~200 Backbone Views) that has been developed for over 3 years and will continue to be developed (hopefully) for a long time. In that situation, having well documented, tested and supported third party libraries for common tasks like rich tables, form validation, UI component libraries, and integrations with other tools is tremendously useful.  As an experienced developer, I’m capable of writing all of these things myself, but doing so takes time, and the result is likely to be less stable, less well documented, and less well thought through than a popular open source solution.  To be clear, nobody is obligated to write these things for me.  I’m merely making a factual statement that the experience of writing a large web application in Backbone becomes more difficult as the community around the library shrinks.</p>
<p>There’s a second reason why down playing the importance of an ecosystem is harmful though.  I’ve said that I am capable of writing the various components of an ecosystem myself.  But that’s only true of me because I have years of experience writing code, and specifically of working with different libraries that gave me ideas on how those problems should be tackled.  A community that says you should be able to do everything yourself without starting places and good examples is a community that is hostile to beginners.  Let’s not let the JavaScript community be that.</p>
<h3>Is Backbone just stable?</h3>
<p>The second disagreement (and the most common theme on <a href="https://news.ycombinator.com/item?id=11237283">Hacker News</a>) was that the current state of Backbone and its ecosystem is not sad at all.  Backbone is stable, and thats something to be celebrated.  In some cases this echoed what I actually said in the post.  I specifically called out the core Backbone library as a good example of stable software:</p>
<blockquote>
<p>I’m starting with Backbone itself to give an idea what a stable mature project graph looks like. Backbone isn’t getting the activity it used to, but there’s still a steady flow of bug fixes and documentation updates, and issues are being worked through.</p>
</blockquote>
<p>Backbone is stable, and in a vacuum that is something to be happy about.  Stability has not prevented it from having an active team of contributors who are continuing to refine it and make small improvements.  This is great, and on it’s own would make me incredibly pleased as a user.  The problem comes with the libraries around it.  Excepting Marionette, which appears to be getting ready to launch their long awaited version 3, activity in the ecosystem has stagnated in a different way than Backbone core.</p>
<p>Unlike Backbone core, secondary libraries have important issues requested by several people being ignored.  I’ve chosen to avoid calling out specific projects because I don’t think anyone has a responsibility to fix other people’s open source problems and don’t want to add to open source guilt.  But it is not hard to find examples of this if you browse through popular Backbone packages on Github.</p>
<p>Unlike Backbone core, secondary libraries sometimes have no clear active maintainer who can be counted on to put out a release in the case of an emergency change being needed.  This matters because Backbone and JavaScript libraries in general live on an unstable platform.  Browsers change all the time.  While they do their best to maintain backwards compatibility, browsers occasionally introduce bugs, and occasionally fix bugs that a library may have been relying on or working around. In addition to disaster scenarios like that, tools change and best practices change over time.  When documentation stagnates and doesn’t keep up with changes, libraries become less useful and approachable over time.  Most Backbone tutorials on the web, and the documentation for many libraries, assume that scripts will be loaded in directly and that variables will be referenced through namespacing.  In a world where module loaders are becoming a default tool for larger JavaScript applications, thats a gap that makes libraries hard to learn, or teaches out of date practices to less experienced developers.</p>
<p>A healthy stable project ought to be able to check off 3 boxes.</p>
<ol>
<li>
<p>It meets the goals of its authors</p>
</li>
<li>
<p>Major bugs are fixed as they’re reported.</p>
</li>
<li>
<p>It is maintained to the extent that as new issues come in, they are responded to and dealt with</p>
</li>
</ol>
<p>That definition could mean that a library handles a single use cases, and there is rare activity because nobody ever encounters any problems.  But for larger projects, this likely means refinements to fix small issues, documentation changes, and an occasional big bugfix over time. Its these things that make the difference between stable software and abandonware.</p>
<h3>What does it matter in the end?</h3>
<p>I didn’t write my original post to say that Backbone is dead.  I wanted to highlight a way in which the experience of using it has declined over time.  It is specifically a way that makes using Backbone harder for me.  I’m grateful to the many people who have built Backbone and the ecosystem around it, and think it is still a very useful tool.  This ecosystem issue does make me unlikely to recommend Backbone for folks who are building web applications “at scale”.  I think Ember or possibly React are better choices for that.  For small one off projects, and for content focused sites that need as little JavaScript as possible while still providing a rich experience, Backbone is a great choice.</p>
<h3>Subscribe</h3>
<p>Thanks for taking the time to read this post!  JavaScript development is one of the main topics of this blog, so if you enjoyed the post, please consider subscribing by using the <a href="http://feedpress.me/benmccormick">feed</a>, <a href="http://twitter.com/benmccormickorg">Twitter</a> or my <a href="http://eepurl.com/WFYon">mailing list</a>. If you’re interested in Backbone you also might want to check out my <a href="http://benmccormick.org/marionette-explained/">series on Marionette.js</a>, or my post on <a href="http://benmccormick.org/2015/09/09/what-can-backbone-developers-learn-from-react/">what Backbone developers can learn from React</a>.</p>
]]></content>
        <author>
            <name>Ben McCormick</name>
            <email>ben@benmccormick.org</email>
            <uri>http://benmccormick.org</uri>
        </author>
    </entry>
    <entry>
        <title type="html"><![CDATA[The Sad State of the Backbone Ecosystem]]></title>
        <id>https://benmccormick.org/2016/03/07/the-sad-state-of-the-backbone-ecosystem/</id>
        <link href="https://benmccormick.org/2016/03/07/the-sad-state-of-the-backbone-ecosystem/">
        </link>
        <updated>2016-03-07T05:06:40Z</updated>
        <content type="html"><![CDATA[<p>For the past 2 years, ~90% of my coding time has been spent working on a large scale Backbone.js app.  In February 2014, the Backbone community was in a fairly good place.  The core library had reached 1.0 the previous year and had a strong team around it.  Marionette had emerged as a de-facto standard for web applications [^1].  There were Backbone specific plugins for many tasks, and generally gaps could be filled using the jQuery plugin ecosystem, or a framework agnostic library.  At the time, Backbone would have been a very defensible choice as a library for starting a new web development, as a simpler and more stable alternative to AngularJS, the current “hot” framework.</p>
<p>Since then a few things have happened.  First, React has taken off, while Angular and Ember have continued to grow and learn from React and each other. Angular and React have benefited from significant marketing and financial support for a core development team that have helped them grow quickly.  Google Trends gives a pretty good idea of how that has turned out.</p>
<p><img src="http://benmccormick.org/posts/images/Google_Trends_-_Web_Search_interest__angular_js__react_js__backbone_js__ember_js_-_Worldwide__Jan_2010_-_Feb_2016.png" alt="Google trends graph"></p>
<p><strong>Update:</strong> <em>I’ve changed the above graph from an original that used angular.js, backbone.js, ember.js, and react.js as the search terms.  Only Backbone prefixes itself with a .js that way, and it undersold the other libraries, especially Angular.  I believe that this chart more accurately reflects usage trends.</em></p>
<p>Secondly, Backbone’s author, <a href="https://twitter.com/jashkenas">Jeremy Ashkenas</a> made a decision to call Backbone “finished” in terms of API and feature set after the 1.0 release.  This has the advantage of leaving Backbone as by far the most stable major JavaScript framework, but hinders efforts to pull in lessons from other frameworks [^2].</p>
<p>Finally, whether as a result of the first 2 items or due to some other factor, the ecosystem around Backbone has crumbled.  While Backbone’s core has stabilized, it still has a team of maintainers who are actively managing the project.  That does not appear to be the case for many of the other libraries in the Backbone ecosystem.  To investigate my perception of this, I decided to look at the contribution graphs of popular Backbone libraries to see the trends over the last 2 years.  I built a list of libraries based on the projects that the bower registry returns for the backbone keyword, looking for projects with at least 400 github stars[^3]. That lead to a list of 24 projects below.</p>
<p>To be clear, I’m not posting this as a criticism of anyone.  Open source is a volunteer effort, and maintaining a project is hard and often doesn’t make sense when the author has moved on to other challenges.  This is simply an honest look at where the Backbone ecosystem stands, with the goal of helping those of us who are building Backbone applications or considering using it to evaluate the ecosystem honestly.</p>
<h3>1. Backbone</h3>
<p><img src="http://benmccormick.org/posts/images/Contributors_to_jashkenas_backbone.png" alt="backbone graph"></p>
<p><strong>Open issues:</strong> 54</p>
<p><strong>Issues closed in 2016:</strong> 50+</p>
<p><strong>Last Release</strong>: 3 days ago (March 3rd 2016)</p>
<p>I’m starting with Backbone itself to give an idea what a stable mature project graph looks like.  Backbone isn’t getting the activity it used to, but there’s still a steady flow of bug fixes and documentation updates, and issues are being worked through.</p>
<h3>2. Marionette</h3>
<p><img src="http://benmccormick.org/posts/images/Contributors_to_marionettejs_backbone_marionette.png" alt="mn graph"></p>
<p><strong>Open Issues:</strong> 107</p>
<p><strong>Issues closed in 2016:</strong> 30+</p>
<p><strong>Last Release</strong>: November 22 2015</p>
<p>Of all the graphs here, this one is the nearest and dearest to me.  I’ve contributed code to Marionette, and have written about it <a href="http://benmccormick.org/marionette-explained/">many times</a> on this blog.  Marionette still is seeing plenty of work, but as the contributors have cycled through, work on a long awaited version 3 with important improvements has sat on a branch for over a year.  This is a great library, but it hasn’t been immune to the wider issues in the ecosystem.</p>
<h3>3. Backbone.Relational</h3>
<p><img src="http://benmccormick.org/posts/images/Contributors_to_PaulUithol_Backbone-relational.png" alt="bb-relational"></p>
<p><strong>Open Issues:</strong> 122</p>
<p><strong>Issues closed in 2016:</strong> 0</p>
<p><strong>Last Release:</strong> August 19 2015</p>
<p>Backbone.Relational is another “stable” library.  On its own, there’s nothing wrong with that, this is a focused library that doesn’t necessarily need a lot of new features.  But this is the start of a pattern.</p>
<h3>4. backbone-forms</h3>
<p><img src="http://benmccormick.org/posts/images/Contributors_to_powmedia_backbone-forms.png" alt="bb-forms"></p>
<p><strong>Open Issues:</strong> 172</p>
<p><strong>Issues closed in 2016:</strong> 14</p>
<p><strong>Last Release:</strong> Jan 21, 2016</p>
<h3>5. backgrid</h3>
<p><img src="http://benmccormick.org/posts/images/Contributors_to_wyuenho_backgrid.png" alt="backgrid"></p>
<p><strong>Open Issues:</strong> 111</p>
<p><strong>Issues closed in 2016:</strong> 3</p>
<p><strong>Last Release:</strong> Jan 21 2014</p>
<p>This is the first project on this list that I wouldn’t consider to be actively maintained.  Commits over the past 2 years have been primarily about keeping tooling and documentation up to date.</p>
<h3>6. backbone.localStorage</h3>
<p><img src="http://benmccormick.org/posts/images/Contributors_to_jeromegn_Backbone_localStorage.png" alt="localstorage"></p>
<p><strong>Open Issues:</strong> 45</p>
<p><strong>Issues closed in 2016:</strong> 1</p>
<p><strong>Last Release:</strong> Jan 22 2015</p>
<h3>7. backbone.stickit</h3>
<p><img src="http://benmccormick.org/posts/images/Contributors_to_NYTimes_backbone_stickit.png" alt="stickit"></p>
<p><strong>Open Issues:</strong> 26</p>
<p><strong>Issues closed in 2016:</strong> 1</p>
<p><strong>Last Release:</strong> May 11 2015</p>
<h3>8. backbone.paginator</h3>
<p><img src="http://benmccormick.org/posts/images/Contributors_to_backbone-paginator_backbone_paginator.png" alt="paginator"></p>
<p><strong>Open Issues:</strong> 20</p>
<p><strong>Issues closed in 2016:</strong> 7+</p>
<p><strong>Last Release:</strong> Feb 3 2016</p>
<h3>9. Backbone-validation</h3>
<p><img src="http://benmccormick.org/posts/images/Contributors_to_thedersen_backbone_validation.png" alt="validation"></p>
<p><strong>Open Issues:</strong> 79</p>
<p><strong>Issues closed in 2016:</strong> 1</p>
<p><strong>Last Release:</strong> May 8 2015</p>
<p>I have personal experience with the abandoned state of this library since my team has been working off a forked version of it for 6 months while waiting on maintainers to address a <a href="https://github.com/thedersen/backbone.validation/pull/302">pull request</a>.  Like many others here, it appears to be a project that the core team moved on from and nobody else had the motivation or time to pick it up.  While there’s nothing wrong with that, it makes it hard to rely on these projects.</p>
<h3>10. Knockback</h3>
<p><img src="http://benmccormick.org/posts/images/Contributors_to_kmalakoff_knockback.png" alt="knockback graph"></p>
<p><strong>Open Issues:</strong> 4</p>
<p><strong>Issues closed in 2016:</strong> 1</p>
<p><strong>Last Release:</strong> Sep 28 2015</p>
<h3>11. Exoskeleton</h3>
<p><img src="http://benmccormick.org/posts/images/Contributors_to_paulmillr_exoskeleton.png" alt="exoskeleton graph"></p>
<p><strong>Open Issues:</strong> 21</p>
<p><strong>Issues closed in 2016:</strong> 2</p>
<p><strong>Last Release:</strong> August 4 2014</p>
<h3>12. Backbone.dualstorage</h3>
<p><img src="http://benmccormick.org/posts/images/Banners_and_Alerts_and_Contributors_to_nilbus_Backbone_dualStorage.png" alt="backbone.dualstorage"></p>
<p><strong>Open Issues:</strong> 30</p>
<p><strong>Issues closed in 2016:</strong> 0</p>
<p><strong>Last Release:</strong> Feb 16 2015</p>
<h3>13. Backbone-react-component</h3>
<p><img src="http://benmccormick.org/posts/images/Contributors_to_magalhas_backbone-react-component.png" alt="backbone react component"></p>
<p><strong>Open Issues:</strong> 8</p>
<p><strong>Issues closed in 2016:</strong> 1</p>
<p><strong>Last Release:</strong> Nov 6 2015</p>
<h3>14. Backbone-offline</h3>
<p><img src="http://benmccormick.org/posts/images/Contributors_to_alekseykulikov_backbone-offline.png" alt="backbone-offline"></p>
<p><strong>Open Issues:</strong> 30</p>
<p><strong>Issues closed in 2016:</strong> 0</p>
<p><strong>Last Release:</strong> Aug 21 2013</p>
<p>This project is actually documented as being deprecated and discontinued.  There is talk in the README about building a successor library, but it appears to have never emerged.</p>
<h3>15. React.Backbone</h3>
<p><img src="http://benmccormick.org/posts/images/Contributors_to_clayallsopp_react_backbone.png" alt="react.backbone"></p>
<p><strong>Open Issues:</strong> 11</p>
<p><strong>Issues closed in 2016:</strong> 0</p>
<p><strong>Last Release:</strong> Jan 5 2015</p>
<p>Interesting, and not encouraging, that the 2 newest libraries at this popularity level are both for helping Backbone users migrate to React, and neither appear to be very active.</p>
<h3>16. Backbone.expoxy</h3>
<p><img src="http://benmccormick.org/posts/images/Contributors_to_gmac_backbone_epoxy.png" alt="backbone.epoxy"></p>
<p><strong>Open Issues:</strong> 19</p>
<p><strong>Issues closed in 2016:</strong> 1</p>
<p><strong>Last Release:</strong> Nov 20 2014</p>
<h3>17. backbone.iobind</h3>
<p><img src="http://benmccormick.org/posts/images/Contributors_to_noveogroup_backbone_iobind.png" alt="backbone.iobind"></p>
<p><strong>Open Issues:</strong> 16</p>
<p><strong>Issues closed in 2016:</strong> 1</p>
<p><strong>Last Release:</strong> Dec 10 2014</p>
<h3>18. backbone-associations</h3>
<p><img src="http://benmccormick.org/posts/images/Contributors_to_dhruvaray_backbone-associations.png" alt="backbone-associations graph"></p>
<p><strong>Open Issues:</strong> 16</p>
<p><strong>Issues closed in 2016:</strong> 0</p>
<p><strong>Last Release:</strong> Jun 28 2014</p>
<p>We’re really starting to get into the meat of the dead projects now.  While there are always going to be older projects that were once popular and got a lot of stars and are now abandoned, that shouldn’t be this many of the top 20 projects</p>
<h3>19. backbone-tastypie</h3>
<p><img src="http://benmccormick.org/posts/images/Contributors_to_PaulUithol_backbone-tastypie.png" alt="tastypie graph"></p>
<p><strong>Open Issues:</strong> 12</p>
<p><strong>Issues closed in 2016:</strong> 0</p>
<p><strong>Last Release:</strong> Oct 26 2013</p>
<p>This is a single use case library that presumably was abandoned after solving a problem, but its worth including to illustrate that the 400 star bar isn’t that hard to hit. A similar search for React projects on bower yields 46 projects with 400+ stars, and React is only ~3 years old.</p>
<h3>20. backbone.syphon</h3>
<p><img src="http://benmccormick.org/posts/images/Contributors_to_marionettejs_backbone_syphon.png" alt="syphon graph"></p>
<p><strong>Open Issues:</strong> 19</p>
<p><strong>Issues closed in 2016:</strong> 1</p>
<p><strong>Last Release:</strong> Oct 18 2015</p>
<h3>21. backbone-nested</h3>
<p><img src="http://benmccormick.org/posts/images/Contributors_to_afeld_backbone-nested.png" alt="backbone-nested"></p>
<p><strong>Open Issues:</strong> 45</p>
<p><strong>Issues closed in 2016:</strong> 1</p>
<p><strong>Last Release:</strong> Jul 27 2015</p>
<h3>22. backbone.radio</h3>
<p><img src="http://benmccormick.org/posts/images/Contributors_to_marionettejs_backbone_radio.png" alt="backbone.radio"></p>
<p><strong>Open Issues:</strong> 9</p>
<p><strong>Issues closed in 2016:</strong> 0</p>
<p><strong>Last Release:</strong> Sep 5 2015</p>
<p>Backbone.Radio (along with Backbone.syphon) is part of the marionette project.  You can see that those projects at least have continued work during the past year, albeit at a significantly less active rate than during 2014</p>
<h3>23. backbone-fetch-cache</h3>
<p><img src="http://benmccormick.org/posts/images/Contributors_to_madglory_backbone-fetch-cache.png" alt="backbone-fetch-cache graph"></p>
<p><strong>Open Issues:</strong> 26</p>
<p><strong>Issues closed in 2016:</strong> 2</p>
<p><strong>Last Release:</strong> Feb 16 2014</p>
<h3>24. backbone-query-parameters</h3>
<p><img src="http://benmccormick.org/posts/images/Contributors_to_jhudson8_backbone-query-parameters.png" alt="backbone-query-parameters"></p>
<p><strong>Open Issues:</strong> 10</p>
<p><strong>Issues closed in 2016:</strong> 0</p>
<p><strong>Last Release:</strong> Sep 23 2014</p>
<p>So what does this look like in aggregate.  Of the “top 24” Backbone projects, only 2 were started after January 2014, and one of those is a tool to migrate Backbone projects to React, the other was a rebrand of an existing tool.  18 of the top 24 libraries have not had a release in the last 6 months, 9 have not had a release since December 2014 or earlier.  If we classify these libraries as “Actively Growing”, “Actively being developed”, “Stable and maintained”, “Flickering Signs of life”, “All but dead”[^4], and “Dead”, I would personally split that out like this:</p>
<table>
<thead>
<tr><th>Title</th><th>Libraries</th><tr>
</thead>
<tbody>
<tr><td>Actively Growing</td><td></td></tr>
<tr><td>Actively Developed</td><td> Marionette</td></tr>
<tr><td>Stable + minimally maintained</td><td> Backbone, Backbone.Relational, backbone-forms, backbone.paginator, Backbone.syphon, Backbone.radio</td></tr>
<tr><td>Flickering Signs of life</td><td> back grid, knockback,</td></tr>
<tr><td>All but Dead</td><td> backbone.localstorage, backbone.stickit, backbone-validation, exoskeleton, backbone.dualstorage, backbone.react-component, react.backbone, backbone-nested, backbone-fetch-cache, backbone-query-parameters</td></tr>
<tr><td>Dead</td><td> backbone.offline, backbone.iobind,  backbone.epoxy, backbone-associations, backbone-tastypie</td></tr>
</table>
<p>It is not a pretty picture right now.  If you’re part of the Backbone community, I’d love to hear from you on this.  Should we be calling Backbone dead and looking to migrate ASAP?  Do you think I’m overselling this problem?  Are there libraries that I’m not considering right now that are thriving?  Or is focusing on Backbone-specific libraries a mistake because most developers are pasting together multiple libraries that aren’t necessarily tightly tied.</p>
<h3>Subscribe</h3>
<p>Thanks for taking the time to read this post!  JavaScript development is one of the main topics of this blog, so if you enjoyed the post, please consider subscribing by using the <a href="http://feedpress.me/benmccormick">feed</a>, <a href="http://twitter.com/benmccormickorg">Twitter</a> or my <a href="http://eepurl.com/WFYon">mailing list</a>. If you’re interested in Backbone you also might want to check out my <a href="http://benmccormick.org/marionette-explained/">series on Marionette.js</a>, or my post on <a href="http://benmccormick.org/2015/09/09/what-can-backbone-developers-learn-from-react/">what Backbone developers can learn from React</a>.</p>
<p>[^1]: When I attended BackboneConf later that year, about 75% of attendees raised their hands when asked if they had used Marionette
[^2]: Some ideas, like a better router or better templating systems, can be pulled in as 3rd party libraries just fine.  But conceptual changes like 1 way data flow or easily composable components from React and the ES6 class model can’t easily be pulled into Backbone without changes to the core library.  It’s debatable whether those ideas are useful for Backbone, but it is clear that they will not fit within the current state of the library.
[^3]: I used Bower rather than npm because it returns search results sorted by stars rather than trying to directly match the query.
[^4]: I don’t like calling somebody else’s project dead if its not labeled that way and has had recent issues activity</p>
]]></content>
        <author>
            <name>Ben McCormick</name>
            <email>ben@benmccormick.org</email>
            <uri>http://benmccormick.org</uri>
        </author>
    </entry>
    <entry>
        <title type="html"><![CDATA[Staying Productive]]></title>
        <id>https://benmccormick.org/2016/01/25/staying-productive/</id>
        <link href="https://benmccormick.org/2016/01/25/staying-productive/">
        </link>
        <updated>2016-01-25T04:41:46Z</updated>
        <content type="html"><![CDATA[<p>I’ve been thinking a lot lately about what makes me productive vs unproductive.  A lot of the time Software Developers tend to focus on their tools and environments when they think about productivity.  I’m certainly all into that, as you can see if you look <a href="http://benmccormick.org/learning-vim-in-2014/">back</a>, <a href="http://benmccormick.org/2015/11/25/productive-javascript-development/">through</a>, <a href="http://benmccormick.org/2016/01/11/the-most-interesting-atom-packages-ive-found-so-far/">my blog</a>.  But in my mind the most important factors in building productivity are non-software related.</p>
<h3>Setting Goals</h3>
<p>By far the most important thing I’ve found for being productive was setting clear goals for what I want to get done.  Without goal posts to aim for, it’s hard to tell what you’ve really accomplished, and easy to get pulled off onto suboptimal tasks.  Goals are best set with a wider context in mind.  The act of setting and measuring goals tends to make us focus on those areas, so make sure your goals reflect your priorities.  If you set all of your goals around work, it can be easier to justify neglecting your family.  If you set a goal of writing every day, that might overwhelm time for exercising and keeping yourself healthy.  Therefore its helpful to set goals in a holistic way that allows you to judge what you value in the big picture.</p>
<h3>Mechanical / Creative Tasks</h3>
<p>I saw a great <a href="https://news.ycombinator.com/item?id=10959022">comment</a> on Hacker News the other day that differentiated between projects and chores. The idea is that when you’re feeling productive you should work on projects, when you’re not you should do chores.  One of the biggest boosts to my productivity I’ve found was when I started categorizing work in my head as “mechanical” vs “creative” tasks.  Mechanical tasks (ie chores) are things that require little mental energy.  They’re well defined and possibly onerous.  Examples include filing email, documenting code, code reviews, and low-thinking code tasks like reproducing a client issue or adding a small well-defined feature.  Creative tasks for me tend to look like more involved code changes designing new features, or debugging client issues that aren’t obvious.</p>
<p>I’m not universally energetic or productive.  Some days I can focus intently on a problem, other days I have the attention span of <a href="https://www.youtube.com/watch?v=SSUXXzN26zg">the dogs from UP!</a>.  When I’m able to focus, I intentionally put aside mechanical tasks, and leave them for times when I have less energy, continuous time or attention.  Oftentimes I’ll even put off higher priority mechanical tasks (or vice versa) to match my mental level to the task, because I end up getting more done sooner in the long run.</p>
<h3>Productive Environments are a thing</h3>
<p>It’s easy to think of productivity as a purely internal thing.  But the environment you’re in matters too.  For creative software work that means getting large blocks of non-distracting time.  That requires some intentionality.  I’ve been blessed with a workplace where I’m given plenty of flexibility.  That means that at times of high distraction-level (big projects, lots of meetings) I tend to actually do most of my work outside of the office, sometimes at weird times.  I use my time at the office for mechanical tasks and meetings, and do the creative work elsewhere.  That’s obviously suboptimal, and when I can I try to clear time during days to do creative work at the office and bunch the distractions.  However it works out for you, the key is to (as much as possible) group your distractions and leave large un-interrupted periods for creative work.</p>
<p>Distractions can be self-inflicted as well as coming from others.  When I want to get stuff done, I try to listen to familiar music (oftentimes looping a single album for a few days).  I’ll also close Slack/Twitter/Email and other distracting apps.  Note that the distinction between mechanical and creative is important here.  When doing mechanical work, I’m fine having distractions around.  It’s only when I’m trying to harness mental energy that I care.</p>
<h3>Day to Day work adds up</h3>
<p>I’m a <a href="http://blog.codinghorror.com/the-magpie-developer/">magpie</a>.  I love shiny new tools, projects, and ideas.  It’s very easy for me to get bored with a problem once I feel like I understand it.   I get excited by pouring effort into learning something new, not so much the hard work to finish the last 20% of what I’ve started.  What I’m slowly learning though is that it is my day-to-day work that makes an impact, not my crazy productivity binges.  Making things that last requires day to day dedication.  That also means maintaining focus.  The easiest way to waste day to day hard work is to spend it on a different thing each day.  There’s nothing wrong with trying new things.  But real productivity requires setting some priorities and sticking with them for a while.</p>
<h3>Team matters more than the project</h3>
<p>Finally, individual productivity doesn’t happen in a vacuum.  Who we work with can undermine or boost our results.  I don’t believe that it’s a small difference either.  I’d rather have a great team with no individually brilliant members than a bad team with one or two great programmers any day.  One of <a href="http://www.windsorcircle.com/about-us/our-values">Windsor Circle’s values</a> is that teams survive longer than individuals.  The same can be said of their results.  Teams can magnify what is possible for a product.  Any individual has limits on what he or she can create.  Teams allow for those limits to be lifted by building on each others skills. At the same time, teams can limit each other by fighting, mis-communicating, distracting, or pursuing different goals.  So all of the other productivities ideas here can be applied just as well to a team as they do to an individual.  The best work comes from teams consistently working together towards a common goal over a long period of time in a constant and productive environment.</p>
<h3>Subscribe</h3>
<p>Thanks for taking the time to read this post!  Software tools and productivity are one of the main topics of this blog, so if you enjoyed the post, please consider subscribing by using the <a href="http://feedpress.me/benmccormick">feed</a>, <a href="http://twitter.com/benmccormickorg">Twitter</a> or my <a href="http://eepurl.com/WFYon">mailing list</a>. You also might want to check out my post on <a href="http://benmccormick.org/2015/11/25/productive-javascript-development/">productive JavaScript development</a>.</p>
]]></content>
        <author>
            <name>Ben McCormick</name>
            <email>ben@benmccormick.org</email>
            <uri>http://benmccormick.org</uri>
        </author>
    </entry>
</feed>