<!DOCTYPE html>
 <html lang="en"><head><meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><script type="text/javascript" src="//use.typekit.net/msd6bqv.js"></script><script type="text/javascript">try{Typekit.load();}catch(e){}</script><title data-react-helmet="true">Explaining Javascript: Object Oriented Programming | benmccormick.org</title><style>.header-link{color:hsla(0,0%,39%,.7)}.header-link:hover{color:#e2777a}.markdown pre{display:block;background:#fdf6e3;color:#657b83;overflow-y:hidden;padding:.2rem .5rem}.markdown pre code{background:none;border:none;border-radius:3px;display:inline-block;overflow:inherit;padding:0;white-space:inherit;word-wrap:normal;font-size:.7rem;line-height:1rem}code{border-radius:3px;white-space:pre;white-space:pre-wrap;white-space:pre-line;white-space:-pre-wrap;white-space:-o-pre-wrap;white-space:-moz-pre-wrap;white-space:-hp-pre-wrap;word-wrap:break-word;border:1px solid #ccc;display:inline;font-family:Inconsolata,monospace,serif;max-width:100%;overflow:auto;padding:0 .1625rem}.hljs,code{background:#fdf6e3;color:#657b83}.hljs{display:block;overflow-x:auto;padding:.5em}.hljs-comment,.hljs-quote{color:#93a1a1}.hljs-addition,.hljs-keyword,.hljs-selector-tag{color:#859900}.hljs-doctag,.hljs-literal,.hljs-meta .hljs-meta-string,.hljs-number,.hljs-regexp,.hljs-string{color:#2aa198}.hljs-name,.hljs-section,.hljs-selector-class,.hljs-selector-id,.hljs-title{color:#268bd2}.hljs-attr,.hljs-attribute,.hljs-class .hljs-title,.hljs-template-variable,.hljs-type,.hljs-variable{color:#b58900}.hljs-bullet,.hljs-link,.hljs-meta,.hljs-meta .hljs-keyword,.hljs-selector-attr,.hljs-selector-pseudo,.hljs-subst,.hljs-symbol{color:#cb4b16}.hljs-built_in,.hljs-deletion{color:#dc322f}.hljs-formula{background:#eee8d5}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}body,h1,h2,h3,h4,h5,h6,p{font-family:brandon-grotesque,Brandon Grotesque,Helvetica Neue,Helvetica,Arial,Lucida Sans,Geneva,Verdana,sans-serif;text-rendering:optimizeLegibility}a{color:#e2777a;text-decoration:none}blockquote{border-left:5px solid #57a3e8;font-style:italic;background:#eee;font-weight:400;font-size:.9rem;padding:10px 20px;margin:0 0 30px -25px}h2,h3{color:#57a3e8}.explanation{padding:10px;background:#eee;border-radius:10px;margin:20px auto;font-size:.85em}.reading-img img{width:150px;float:right;margin:10px}</style></head><body class="landing-page" style="background:#FCFCFC;"><div id="react-mount"><div style="max-width:39.984rem;margin-left:auto;margin-right:auto;padding:2.499rem 1.2495rem;" data-reactroot="" data-reactid="1" data-react-checksum="-1814049098"><div style="display:flex;padding-bottom:0.5rem;margin-bottom:0.5rem;" data-reactid="2"><div style="flex-grow:3;display:flex;flex-direction:column;justify-content:space-around;" data-reactid="3"><h3 style="margin:0;padding-bottom:0;" data-reactid="4"><a style="box-shadow:none;text-decoration:none;color:inherit;" href="/benmccormickorg/" data-reactid="5">benmccormick.org</a></h3><div style="color:rgba(100,100,100, 0.7);" data-reactid="6"><a class="header-link" href="/benmccormickorg/subscribe/" data-reactid="7">Subscribe</a><span style="padding:0 0.33rem;" data-reactid="8">•</span><a class="header-link" href="/benmccormickorg/readinglist/" data-reactid="9">Reading List</a><span style="padding:0 0.33rem;" data-reactid="10">•</span><a class="header-link" href="http://twitter.com/ben336" data-reactid="11">Twitter</a><span style="padding:0 0.33rem;" data-reactid="12">•</span><a class="header-link" href="/benmccormickorg/about/" data-reactid="13">About</a></div></div><div style="flex-shrink:2;" data-reactid="14"><div data-reactid="15"><a href="https://www.amazon.com/Effective-JavaScript-Specific-Software-Development/dp/0321812182/ref=as_li_ss_il?ie=UTF8&amp;linkCode=li1&amp;tag=benmccormicko-20&amp;linkId=204d9fef609d10bc79cb424fc44fd1ab" target="_blank" data-reactid="16"><div style="max-height:6.5rem;display:flex;justify-content:flex-end;background:#F0F0F0;padding:0.2rem;" data-reactid="17"><div data-reactid="18"><img src="//ws-na.amazon-adsystem.com/widgets/q?_encoding=UTF8&amp;ASIN=0321812182&amp;Format=_SL110_&amp;ID=AsinImage&amp;MarketPlace=US&amp;ServiceVersion=20070822&amp;WS=1&amp;tag=benmccormicko-20" data-reactid="19"/><img src="https://ir-na.amazon-adsystem.com/e/ir?t=benmccormicko-20&amp;l=li1&amp;o=1&amp;a=0321812182" width="1" height="1" alt="" style="border:none;margin:0px;" data-reactid="20"/></div><div style="font-size:0.6em;line-height:1em;max-width:5rem;padding:0 0.5rem;display:flex;align-items:center;flex-direction:column;justify-content:space-between;color:rgba(100, 100, 100, 0.701961);" data-reactid="21"><span data-reactid="22">Please support this blog by shopping on Amazon</span><a href="/benmccormickorg/amazonlinks" data-reactid="23">What is this?</a></div></div></a></div></div></div><div class="markdown" data-reactid="24"><!-- react-empty: 25 --><h5 style="display:block;color:rgba(100,100,100, 0.7);margin-bottom:0.4165rem;" data-reactid="26">January 11, 2013</h5><h1 style="margin-top:0;margin-bottom:1rem;" data-reactid="27">Explaining Javascript: Object Oriented Programming</h1><div class="article-body" data-reactid="28"><p>I’m continuing this series on Javascript concepts for people new to the language by looking at  object oriented programming.  One of the more confusing concepts for new Javascript programmers, especially those used to the classical inheritance structures of Java or C++ is Javascript’s prototypical inheritance model.  Because it is possible to write syntax for Javascript object creation that can look very similar to classical inheritance in Java, its easy to be misled and have false expectations.  Its important to understand how Javascript’s object model works, so that you can adjust your expectations and write code that takes advantage of the language’s expressive power.</p>
<h4>Creating a new object</h4>
<p>Javascript provides multiple ways to create new objects.  The simplest way is to just create an empty object with <code>{}</code>.  The one I’ll be looking at today was modeled after Java syntax and gives the language a deceptively classical vibe:</p>
<pre><code class="language-javascript"><span class="hljs-comment">//Creating Objects with new</span>

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Animal</span>(<span class="hljs-params"></span>)</span>{
        <span class="hljs-keyword">this</span>.home = <span class="hljs-string">"earth"</span>;
        <span class="hljs-keyword">this</span>.noise = <span class="hljs-string">"roar"</span>;
    }

    Animal.prototype.sound = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
        alert(<span class="hljs-keyword">this</span>.noise);
    }

    <span class="hljs-keyword">var</span> animalObject = <span class="hljs-keyword">new</span> Animal();
    animalObject.sound(); <span class="hljs-comment">// roar</span>
    <span class="hljs-keyword">var</span> home = animalObject.home <span class="hljs-comment">//earth</span>
</code></pre>
<p>This all looks very familiar and comfortable to a Java programmer.  Animal() is the constructor of a class Animal, with a function sound() and animalObject is an instance of that class.  And you can write code like that if you want.  The problem is, that model is not enforced at all by javascript.  Javascript doesn’t have any special “constructor functions” or classes<sup id="fnref:1"><a href="#fn:1" rel="footnote">1</a></sup>.  Any function can be used as a constructor</p>
<pre><code class="language-javascript"><span class="hljs-comment">//Normal Function as constructor</span>

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">normalFunc</span>(<span class="hljs-params"></span>)</span>{
        alert(<span class="hljs-string">"This is a normal function"</span>)
    }
    <span class="hljs-keyword">var</span> normal = <span class="hljs-keyword">new</span> normalFunc();
    normal <span class="hljs-keyword">instanceof</span> normalFunc  <span class="hljs-comment">//true</span>
    <span class="hljs-keyword">var</span> x = {};
    x.y = normalFunc;

    <span class="hljs-keyword">var</span> huh = <span class="hljs-keyword">new</span> x.y();
    huh instance <span class="hljs-keyword">of</span> normalFunc <span class="hljs-comment">//true</span>
</code></pre>
<p>So whats actually happening when you call new before a function?  The new operator generates a new object, binds <code>this</code> to that object for the constructor function, calls that function and sets that function as the prototype of the new object.  But what is a prototype?</p>
<h4>Prototypes</h4>
<p>Javascript inheritance is at its heart “prototypical inheritance”.  This means that rather than having a concept of “classes” and “implementations” of those classes, javascript objects inherit their properties directly from other objects.  So for the “classical” example above, what is actually happening is that a new object is being created, it is having some of its properties set by the constructor function, and then has the constructor’s prototype set as its prototype.  This means that it has access to any properties on the “prototype chain” of the constructor, which in this case includes the sound method.  All objects have acccess to Object.prototype, giving it access to object properties and methods like toString, hasOwnProperty and others.</p>
<h4>The ES5 Way</h4>
<p>The ECMAScript 5 specification defines a new way to create objects from existing objects with the <strong><a href="https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/create">Object.create()</a></strong> syntax.  Object.create takes an existing object and sets it as the prototype object for a newly created object<sup id="fnref:2"><a href="#fn:2" rel="footnote">2</a></sup>.  This was added to make the syntax for setting the prototype of a new object easier and more clear.<sup id="fnref:3"><a href="#fn:3" rel="footnote">3</a></sup>  It also allows us to simulate classical inheritance:</p>
<pre><code class="language-javascript"><span class="hljs-comment">//ES5 Classical Inheritance example</span>

    <span class="hljs-keyword">var</span> Cat = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
        Animal.call(<span class="hljs-keyword">this</span>); <span class="hljs-comment">//Call the Animal constructor to set local variables</span>
        <span class="hljs-keyword">this</span>.noise = <span class="hljs-string">"meow"</span> <span class="hljs-comment">//override the Animal sound</span>
    }
    Cat.prototype = <span class="hljs-built_in">Object</span>.create(Animal.prototype)

   <span class="hljs-keyword">var</span> kitty = <span class="hljs-keyword">new</span> Cat();

   kitty.sound() <span class="hljs-comment">//meow</span>
   alert(kitty.hasOwnProperty(<span class="hljs-string">"sound"</span>)) <span class="hljs-comment">//false</span>
   alert(kitty <span class="hljs-keyword">instanceof</span> Cat) <span class="hljs-comment">//true</span>
   alert(kitty <span class="hljs-keyword">instanceof</span> Animal) <span class="hljs-comment">//true</span>
</code></pre>
<p>So as you can see, it is very possible to write Object-Oriented Javascript.  The key is to understand that what’s happening behind the scenes in Javascript is different than Java or C++, even though the syntax may look similar.</p>
<h4>Summary</h4>
<ul>
<li>
<p>Inheritance and object oriented programming in javascript are possible, but are more of a programmer defined construct rather than an inherent property of the language</p>
</li>
<li>
<p>Javascript supports prototypical inheritance, meaning that it inherits functions and properties from its prototype object.  All objects inherit from Object.prototype.</p>
</li>
<li>
<p>ECMAScript 5 introduced support for Object.create, which provides an easier syntax for creating new objects and simulating inheritance.</p>
</li>
</ul>
<hr>
<h3>Further Reading</h3>
<ul>
<li>
<p><a href="https://developer.mozilla.org/en-US/docs/JavaScript/Introduction_to_Object-Oriented_JavaScript">Mozilla’s Developer Documentation</a> has a good summary of implementing Object Oriented Programming concepts in Javascript</p>
</li>
<li>
<p><a href="http://msdn.microsoft.com/en-us/magazine/gg314983.aspx">Managing Javascript Objects</a> is a great article by Nicholas Zakas for MSDN about designing an object oriented application in Javascript.  Zakas also has recently written a <a href="https://leanpub.com/oopinjavascript">book</a> on object oriented programming in Javascript</p>
</li>
</ul>
<hr>
<h3>Explaining Javascript</h3>
<p>This is the second article in my Explaining Javascript series for introducing Javascript concepts to new JS developers.</p>
<ol>
<li>
<p><a href="http://www.benmccormick.org/blog/2013/01/08/javascript-explained-closures/">Closures</a></p>
</li>
<li>
<p><a href="http://www.benmccormick.org/blog/2013/01/12/javascript-explained-object-oriented-javascript/">Object Oriented Programming</a></p>
</li>
</ol>
<hr>
<div class="footnotes"><ol>
<li class="footnote" id="fn:1">
<p>
In the next version of Javascript ES6 there will be a more formal concept of classes.  You can read more <a href="http://wiki.ecmascript.org/doku.php?id=strawman:maximally_minimal_classes">here</a> if interested
<a href="#fnref:1" title="return to article"> ↩</a>
</p>
</li>
<li class="footnote" id="fn:2">
<p>
With an optional second argument to set the local properties of the object from another object.  Note that these properties will need to be Objects, not primitive values, or a TypeError will be thrown        
<a href="#fnref:2" title="return to article"> ↩</a>
</p>
</li>
<li class="footnote" id="fn:2">
<p>Thanks to <a href="https://plus.google.com/u/0/110077141419510454119/posts">Eric Elliot</a> for pointing out that my original description of Object.Create was misleading.  There are multiple ways to create and reuse object code in Javascript.  I only touch on one of them in this article.<br>
<a href="#fnref:2" title="return to article"> ↩</a></p>
</li>
</ol></div>
</div><hr style="margin-bottom:3.332rem;" data-reactid="29"/><noscript data-reactid="30"></noscript><p style="margin-bottom:4.165rem;" data-reactid="31"><!-- react-text: 32 -->Written by <!-- /react-text --><!-- react-text: 33 -->Ben McCormick<!-- /react-text --></p></div><span style="display:block;clear:both;" data-reactid="34"> </span></div></div><script src="/benmccormickorg/bundle.js?t=1474688792461"></script></body></html>