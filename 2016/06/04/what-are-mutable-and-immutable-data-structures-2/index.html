<!DOCTYPE html>
 <html lang="en"><head><meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><script type="text/javascript" src="//use.typekit.net/msd6bqv.js"></script><script type="text/javascript">try{Typekit.load();}catch(e){}</script><title data-react-helmet="true">What are mutable and immutable data structures? | benmccormick.org</title><style>.header-link{color:hsla(0,0%,39%,.7)}.header-link:hover{color:#e2777a}.markdown pre{display:block;background:#fdf6e3;color:#657b83;overflow-y:hidden;padding:.2rem .5rem}.markdown pre code{background:none;border:none;border-radius:3px;display:inline-block;overflow:inherit;padding:0;white-space:inherit;word-wrap:normal;font-size:.7rem;line-height:1rem}code{border-radius:3px;white-space:pre;white-space:pre-wrap;white-space:pre-line;white-space:-pre-wrap;white-space:-o-pre-wrap;white-space:-moz-pre-wrap;white-space:-hp-pre-wrap;word-wrap:break-word;border:1px solid #ccc;display:inline;font-family:Inconsolata,monospace,serif;max-width:100%;overflow:auto;padding:0 .1625rem}.hljs,code{background:#fdf6e3;color:#657b83}.hljs{display:block;overflow-x:auto;padding:.5em}.hljs-comment,.hljs-quote{color:#93a1a1}.hljs-addition,.hljs-keyword,.hljs-selector-tag{color:#859900}.hljs-doctag,.hljs-literal,.hljs-meta .hljs-meta-string,.hljs-number,.hljs-regexp,.hljs-string{color:#2aa198}.hljs-name,.hljs-section,.hljs-selector-class,.hljs-selector-id,.hljs-title{color:#268bd2}.hljs-attr,.hljs-attribute,.hljs-class .hljs-title,.hljs-template-variable,.hljs-type,.hljs-variable{color:#b58900}.hljs-bullet,.hljs-link,.hljs-meta,.hljs-meta .hljs-keyword,.hljs-selector-attr,.hljs-selector-pseudo,.hljs-subst,.hljs-symbol{color:#cb4b16}.hljs-built_in,.hljs-deletion{color:#dc322f}.hljs-formula{background:#eee8d5}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}body,h1,h2,h3,h4,h5,h6,p{font-family:brandon-grotesque,Brandon Grotesque,Helvetica Neue,Helvetica,Arial,Lucida Sans,Geneva,Verdana,sans-serif;text-rendering:optimizeLegibility}a{color:#e2777a;text-decoration:none}blockquote{border-left:5px solid #57a3e8;font-style:italic;background:#eee;font-weight:400;font-size:.9rem;padding:10px 20px;margin:0 0 30px -25px}h2,h3{color:#57a3e8}.explanation{padding:10px;background:#eee;border-radius:10px;margin:20px auto;font-size:.85em}.reading-img img{width:150px;float:right;margin:10px}</style></head><body class="landing-page" style="background:#FCFCFC;"><div id="react-mount"><div style="max-width:39.984rem;margin-left:auto;margin-right:auto;padding:2.499rem 1.2495rem;" data-reactroot="" data-reactid="1" data-react-checksum="-182462023"><div style="display:flex;padding-bottom:0.5rem;margin-bottom:0.5rem;" data-reactid="2"><div style="flex-grow:3;display:flex;flex-direction:column;justify-content:space-around;" data-reactid="3"><h3 style="margin:0;padding-bottom:0;" data-reactid="4"><a style="box-shadow:none;text-decoration:none;color:inherit;" href="/benmccormickorg/" data-reactid="5">benmccormick.org</a></h3><div style="color:rgba(100,100,100, 0.7);" data-reactid="6"><a class="header-link" href="/benmccormickorg/subscribe/" data-reactid="7">Subscribe</a><span style="padding:0 0.33rem;" data-reactid="8">•</span><a class="header-link" href="/benmccormickorg/readinglist/" data-reactid="9">Reading List</a><span style="padding:0 0.33rem;" data-reactid="10">•</span><a class="header-link" href="http://twitter.com/ben336" data-reactid="11">Twitter</a><span style="padding:0 0.33rem;" data-reactid="12">•</span><a class="header-link" href="/benmccormickorg/about/" data-reactid="13">About</a></div></div><div style="flex-shrink:2;" data-reactid="14"><div data-reactid="15"><div style="max-height:6.5rem;display:flex;justify-content:flex-end;background:#F0F0F0;padding:0.2rem;" data-reactid="16"><div data-reactid="17"><a href="https://www.amazon.com/Effective-JavaScript-Specific-Software-Development/dp/0321812182/ref=as_li_ss_il?ie=UTF8&amp;linkCode=li1&amp;tag=benmccormicko-20&amp;linkId=204d9fef609d10bc79cb424fc44fd1ab" target="_blank" data-reactid="18"><img src="//ws-na.amazon-adsystem.com/widgets/q?_encoding=UTF8&amp;ASIN=0321812182&amp;Format=_SL110_&amp;ID=AsinImage&amp;MarketPlace=US&amp;ServiceVersion=20070822&amp;WS=1&amp;tag=benmccormicko-20" data-reactid="19"/><img src="https://ir-na.amazon-adsystem.com/e/ir?t=benmccormicko-20&amp;l=li1&amp;o=1&amp;a=0321812182" width="1" height="1" alt="" style="border:none;margin:0px;" data-reactid="20"/></a></div><div style="font-size:0.6em;line-height:1em;max-width:5rem;padding:0 0.5rem;display:flex;align-items:center;flex-direction:column;justify-content:space-between;color:rgba(100, 100, 100, 0.701961);" data-reactid="21"><span data-reactid="22">Please support this blog by shopping on Amazon</span><a href="/benmccormickorg/amazonlinks" data-reactid="23">What is this?</a></div></div></div></div></div><div class="markdown" data-reactid="24"><!-- react-empty: 25 --><h5 style="display:block;color:rgba(100,100,100, 0.7);margin-bottom:0.4165rem;" data-reactid="26">June 4, 2016</h5><h1 style="margin-top:0;margin-bottom:1rem;" data-reactid="27">What are mutable and immutable data structures?</h1><div class="article-body" data-reactid="28"><p>Sometimes concepts and ideas slowly grow in a programming community, sometimes they seem to appear in a flash.  For the first several years I wrote JavaScript, I don’t recall ever seeing anything written online about immutable data.  Since React hit the scene in the last 2 years however, articles mentioning mutable and immutable data seem to have multiplied, as have libraries like Immutable.js and alternate front end languages like Elm that allow users to “use immutable data”.  I’m not going to address those libraries, but thought it would be useful to throw out a quick primer on what immutable data actually is, how it differs from mutable data, and why anyone cares.</p>
<p>A mutable object is an object whose state can be modified after it is created.  An immutable object is an object whose state cannot be modified after it is created.  Examples of native JavaScript values that are immutable are numbers and strings.  Examples of native JavaScript values that are mutable include objects, arrays, functions, classes, sets, and maps.</p>
<h3>Implications of mutable object</h3>
<p>So why does this matter?  Consider the following code examples:</p>
<pre><code class="language-javascript"><span class="hljs-keyword">let</span> a = {
    foo: <span class="hljs-string">'bar'</span>
};

<span class="hljs-keyword">let</span> b = a;

a.foo = <span class="hljs-string">'test'</span>;

<span class="hljs-built_in">console</span>.log(b.foo); <span class="hljs-comment">// test</span>
<span class="hljs-built_in">console</span>.log(a === b) <span class="hljs-comment">// true</span>
</code></pre>
<pre><code class="language-javascript"><span class="hljs-keyword">let</span> a = <span class="hljs-string">'test'</span>;
<span class="hljs-keyword">let</span> b = a;
a = a.substring(<span class="hljs-number">2</span>);

<span class="hljs-built_in">console</span>.log(a) <span class="hljs-comment">//st</span>
<span class="hljs-built_in">console</span>.log(b) <span class="hljs-comment">//test</span>
<span class="hljs-built_in">console</span>.log(a === b) <span class="hljs-comment">//false</span>
</code></pre>
<pre><code class="language-javascript"><span class="hljs-keyword">let</span> a = [<span class="hljs-string">'foo'</span>, <span class="hljs-string">'bar'</span>];
<span class="hljs-keyword">let</span> b = a;

a.push(<span class="hljs-string">'baz'</span>)

<span class="hljs-built_in">console</span>.log(b); <span class="hljs-comment">// ['foo', 'bar', 'baz']</span>
<span class="hljs-built_in">console</span>.log(a === b) <span class="hljs-comment">// true</span>
</code></pre>
<pre><code class="language-javascript"><span class="hljs-keyword">let</span> a = <span class="hljs-number">1</span>;
<span class="hljs-keyword">let</span> b = a;
a++;

<span class="hljs-built_in">console</span>.log(a) <span class="hljs-comment">//2</span>
<span class="hljs-built_in">console</span>.log(b) <span class="hljs-comment">//1</span>
<span class="hljs-built_in">console</span>.log(a === b) <span class="hljs-comment">//false</span>
</code></pre>
<p>What we see is that for mutable values, updating state applies across all <em>references</em> to that variable.  So changing a value in one place, changes it for all references to that object.  For the immutable data types, we have no way of changing the internal state of the data, so the reference always gets reassigned to a new object.  The biggest implication of this is that for immutable data, equality is more reliable since we know that a value’s state won’t be changed out from under us.</p>
<p>Finally, its worth noting that it’s still possible to treat JavaScript objects as immutable.  This can first be done through <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/freeze">Object.freeze</a>, which shallowly renders a JavaScript object immutable.  But it can also be done with programmer discipline.  If we want to rely on object’s being immutable, it’s possible to enforce that all object updates are done through something like
<code>Object.assign(a, {foo: 'bar'})</code> rather than <code>a.foo = 'bar'</code>, and all array updates are done through functions that generate new arrays like <code>Array.prototype.map</code>, <code>Array.prototype.filter</code>, or <code>Array.prototype.concat</code>, rather than mutating methods like <code>Array.prototype.push</code>, <code>Array.prototye.pop</code>, or <code>Array.prototype.sort</code>.  This is less reliable without language level constraints, but has become popular in the React ecosystem for dealing with data for folks who don’t want to introduce abstractions like Immutable.js.</p>
<h3>Subscribe</h3>
<p>Thanks for taking the time to read this post!  JavaScript development is one of the main topics of this blog, so if you enjoyed the post, please consider subscribing by using the <a href="http://feedpress.me/benmccormick">feed</a>, <a href="http://twitter.com/benmccormickorg">Twitter</a> or my <a href="http://eepurl.com/WFYon">mailing list</a>. You also might want to check out my post on <a href="http://benmccormick.org/2015/09/14/es5-es6-es2016-es-next-whats-going-on-with-javascript-versioning/">explaining the different version names of the JavaScript language</a>.</p>
</div><hr style="margin-bottom:3.332rem;" data-reactid="29"/><noscript data-reactid="30"></noscript><p style="margin-bottom:4.165rem;" data-reactid="31"><!-- react-text: 32 -->Written by <!-- /react-text --><!-- react-text: 33 -->Ben McCormick<!-- /react-text --></p></div><span style="display:block;clear:both;" data-reactid="34"> </span></div></div><script src="/benmccormickorg/bundle.js?t=1474689257801"></script></body></html>