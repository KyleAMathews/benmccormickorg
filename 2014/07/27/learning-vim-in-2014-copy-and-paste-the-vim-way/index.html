<!DOCTYPE html>
 <html lang="en"><head><meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><script type="text/javascript" src="//use.typekit.net/msd6bqv.js"></script><script type="text/javascript">try{Typekit.load();}catch(e){}</script><title data-react-helmet="true">Learning Vim in 2014: Copy and Paste the Vim Way | benmccormick.org</title><meta data-react-helmet="true" name="description" content="How to use copy and paste in Vim"/><meta data-react-helmet="true" name="keywords" content="vim, copy, paste, registers, yank, delete"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:site" content="@benmccormickorg"/><meta data-react-helmet="true" name="twitter:creator" content="@ben336"/><meta data-react-helmet="true" name="twitter:title" content="Learning Vim in 2014: Copy and Paste the Vim Way"/><meta data-react-helmet="true" name="twitter:description" content="How to use copy and paste in Vim"/><script data-react-helmet="true" type="application/ld+json">{
                "@context": "http://schema.org"
                "@type": "BlogPosting",
                "headline": "Learning Vim in 2014: Copy and Paste the Vim Way",
                "genre": "Software Development",
                "keywords": "vim, copy, paste, registers, yank, delete",
                "url": "http://benmccormick.org/2014/07/27/learning-vim-in-2014-copy-and-paste-the-vim-way/",
                "datePublished": "2014-07-27",
                "description": "How to use copy and paste in Vim",
                "articleBody": "<p>If you’ve been following <a href=\"http://benmccormick.org/tag/learning-vim-in-2014/\">my series on Vim</a>, it should be clear now that Vim has a pretty clear philosophy of how text editing should work. It’s based on the Unix philosophy of small composable tools, and doesn’t necessarily match up with the conventions that other editors use for common commands.  So it’s probably not surprising that Vim has its own way of handling copy and paste operations, and in fact doesn’t even use those terms.  Vim’s copy and paste handling is minimalist, composable, and powerful, but most people take some time to adjust to it.  I’m going to walk through the basics here, along with a few advanced features that are worth knowing about.</p>
<p>The primary Vim commands for copying something are <code>y</code> (yank) which acts like most people’s view of copy, and the delete/substitute commands <code>d</code> (delete),<code>c</code> (change), <code>x</code> (single character delete), and <code>s</code> (substitute), which unintuitively all act like the more common concept of “cut”.  These can be <a href=\"http://benmccormick.org/2014/07/16/learning-vim-in-2014-vim-as-art/\">composed with motion commands to select different regions</a>.</p>
<p>Any Vim command that deletes text will also save a copy of that text unless you specifically tell it not too.  The idiomatic Vim method of deleting without copying is <code>&quot;_d</code>, which probably sounds bizarre.  We’ll come back to that later, and you’ll see that it makes sense in the bigger scheme of Vim’s copy and paste system.</p>
<p>The basic Vim commands for paste are <code>p</code> (put) which pastes after of the current character/line and <code>P</code> which pastes before the current character/line.  Vim auto detects whether you’ve yanked text on a line by line basis or a character by character basis, and pastes accordingly. Basically, if you select only full lines it will paste line by line and not break on the cursor position, if you select any partial lines it will paste at the character level, starting or ending at the current cursor location.  Note that <code>p</code> also works in visual mode, where it will replace the current selection.</p>
<p>All of this leads to a very common annoyance for new Vim users.  They’re editing a document and yank some text.  Then they go to a new location, delete a few lines, and hit <code>p</code> to replace them with the copied text.  Do you see the problem?  The text that is “put” is not what they originally yanked, but instead it’s the contents of their last delete action. Obviously this can be worked around by changing the order of the actions, but it’s frustrating to users who are used to being able to easily delete without blowing away their paste action.  Even more frustrating is when an experienced Vim user comes by and tells them the answer to their problem is to just type <code>&quot;0p</code> instead. Which will in fact put the correct text. So what’s going on with the weird syntax for these basic action?</p>
<h4>Registers</h4>
<p>What we’re missing is a clear understanding of how Vim handles copy and paste operations.  So let’s clarify.  Unlike most modern systems, which have a clipboard that holds a single value, Vim can store the values of yank and delete commands in one of many registers.  It has 26 normal registers, which correspond to the letters of the alphabet, and several “special” registers.  One of those special registers is the default register, which is where yank and delete commands store their content by default.  Other registers can be accessed with the <code>&quot;&lt;char&gt;</code> prefix that we’ve already seen.  So in the above example, the text from the initial example is moved into the default register, and then replaced there by the deleted text.  But it remains in the 0 register, which always points to the last “yanked” text, ignoring text gained by deleting.</p>
<p>The 26 alphabetical registers serve as great “medium term” storage.  You can use them to yank something that you want to have around for a while, and then put it in a few different places, even if you’re yanking and deleting other things in the meantime.  These will even persist across sessions as long as you have the <code>nocompatible</code> option set in your vimrc file.  However if you overwrite one, there’s no easy way to get it back.</p>
<p>One cool feature of registers is the built in ability to append to the end of them.  If you want to add text to an existing register, for instance if you missed part of the text you wanted to yank, you can do so by capitalizing the register.  So if you had deleted a line and put it in the <code>a</code> register with <code>&quot;add</code>, but meant to include a second line, you could then delete the next line and append it to the register with <code>&quot;Add</code>. <code>&quot;ap</code> would then put the 2 lines back into the document.</p>
<h4>Special Registers</h4>
<p>In addition to the alphabetical registers, there are several <em>special registers</em> that are worth knowing about.  I already mentioned the default register, which most Vim users know about, even if they don’t understand exactly how registers work.  Other important registers are the clipboard register, the black hole register, and the numbered registers.</p>
<p>If you have to learn one special register, learn the clipboard register.  One of the first things people notice about copy and paste in Vim is that it doesn’t interact nicely with other applications’ copy and paste by default.  If you yank a line of text in Vim, it’s not added to the system clipboard.  If you copy some code from Stack Overflow and try to paste it in Vim with <code>p</code>, it won’t work <sup id=\"fnref:1\"><a href=\"#fn:1\">1</a></sup>.  But, since we know about registers, it makes sense that the default register might not be mapped to the clipboard, which we don’t want getting blasted away everytime we delete a character.</p>
<p>Vim isn’t completely disconnected from the system clipboard though.  The clipboard register <code>+</code> is Vim’s proxy to your system clipboard.  So <code>&quot;+y&lt;motion&gt;</code> and <code>&quot;+p</code> act like traditional copy and paste.  Your version of Vim does have to be compiled with clipboard support in order to use the <code>+</code> register. You can check to see if you have clipboard support with <code>:echo has('clipboard').</code><sup id=\"fnref:2\"><a href=\"#fn:2\">2</a></sup> On OSX you can use MacVim to get clipboard support, since the default version of Vim shipped with OSX is not compiled with it.  On other operating systems you’ll have to investigate the easiest way to install with clipboard support if your version doesn’t have it.  It should be enabled for most modern mainstream distributions.</p>
<p>Another register to quickly note is the black hole register <code>_</code>.  The black hole register, as you would expect, doesn’t retain what’s passed to it.  So <code>&quot;_y</code> and <code>&quot;_p</code> are no-ops, and <code>&quot;_d</code> is “true delete”, as opposed to the delete commands default “cut” like behavior.  Of course since most people don’t use all 26 alphabetical registers, you can also achieve effective true delete by deleting to any unused register.</p>
<p>Finally, the number keys also have special register functionality.  You can’t yank text directly to a numbered register.  Instead the <code>0</code> register contains the last yanked text, and the <code>1</code> through <code>9</code> registers contain the last 9 deleted chunks of text.  This feature is a cool idea, but unfortunately the implementation is inconsistent and a bit weird.  For one thing the distinction between yanked and deleted text seems arbitrary, and since they act the same in other ways, puts an added cognitive load on the user to remember which one they used.  Secondly, for whatever reason, deletions that span less than a line get special behavior.  If you delete these to an alphabetical register, they’re saved to <code>&quot;1</code> just like any other delete.  But if you delete them to the default register, they’re saved to <code>&quot;-</code> and not put in <code>&quot;1</code>.  The logic is complicated enough that the numbered registers become tough to use in day to day tasks, and I’ll have to agree with Drew Neil in labeling them one of Vim’s <a href=\"http://vimcasts.org/blog/2013/11/registers-the-good-the-bad-and-the-ugly-parts/\">“bad parts.”</a></p>
<h4>Macros</h4>
<p>One last important thing to know about registers is that along with being used for copy and paste, they serve as a place to save macros, Vim’s reusable command language.  You can save a macro by typing <code>q&lt;register key&gt;&lt;commands&gt;q</code>, and the macro will be saved to the register.  Like yank and delete, capitalizing the register name will let you append to the register instead of replacing it. So there’s a few things you should know about that.  One, if you use macros, don’t save macros to the same registers that you use for copy and paste.  If you use the <code>y</code> register a lot for the convenience of <code>&quot;yy&lt;motion&gt;</code>, don’t use <code>qy</code> to save your macro unless you’re ok with it being blown away by your next yank.  Two, the sharing of registers allows you to copy text to use as a macro.  So if you for instance wanted to have a file with a list of common operations, it would be easy to go to that file, copy a line, and then execute it as a macro.  This isn’t the first thing most people will want to do, but it illustrates the power and flexibility that come when you start combining Vim’s tools.</p>
<hr>
<h3>More Resources</h3>
<ul>
<li>
<p>For a more in depth look at Vim’s special registers, including a bunch I didn’t cover here, you can check out this great <a href=\"http://blog.sanctum.geek.nz/advanced-vim-registers/\">roundup</a></p>
</li>
<li>
<p><a href=\"http://vimcasts.org/categories/copy-and-paste/\">Vimcasts</a> has a whole series of posts on copy and paste in Vim.</p>
</li>
</ul>
<hr>
<h3>Subscribe</h3>
<p>This was the seventh entry in a series of posts on learning Vim in a modern way.  If you enjoyed the post, please consider subscribing by using the <a href=\"http://feedpress.me/benmccormick\">feed</a>, <a href=\"http://twitter.com/benmccormickorg\">Twitter</a> or my <a href=\"http://eepurl.com/WFYon\">mailing list</a>. Also check out the <a href=\"http://benmccormick.org/2014/08/04/learning-vim-in-2014-search/\">next post</a> in the series.</p>
<hr>
<div class=\"footnotes\">
<ol>
    <li class=\"footnote\" id=\"fn:1\">
        <p>
        Of course some people would probably see that as a feature, not a bug
    	<a href=\"#fnref:1\" title=\"return to article\"> ↩</a></p>
    </li>
    <li class=\"footnote\" id=\"fn:2\">
        <p>
        Thanks to schweinschmeisser on Reddit for reminding me to add a way to check for support.
    	<a href=\"#fnref:2\" title=\"return to article\"> ↩</a></p>
    </li>
</ol>
</div>
",
                  "author": {
                    "@type": "Person",
                    "name": "Ben McCormick"
                    "email": "mailto:ben@benmccormick.org",
                    "image": "/profile_pic.jpg",
                    "jobTitle": "Software Engineer",
                    "alumniOf": "Duke",
                    "birthPlace": "Pittsburgh, PA",
                    "gender": "male",
                    "url": "http://benmccormick.org",
              	    "sameAs" : [
                      "https://www.linkedin.com/in/benmccormick",
                      "http://twitter.com/ben336",
                    ]
                 }
              }</script><style id="typography.js">html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{background-color:transparent;-webkit-text-decoration-skip:objects}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font-size:112.5%;line-height:1.666em;box-sizing:border-box;overflow-y:scroll;}*{box-sizing:inherit;}*:before{box-sizing:inherit;}*:after{box-sizing:inherit;}body{color:hsla(0,0%,0%,0.8);font-family:georgia,serif;font-weight:normal;word-wrap:break-word;}img{max-width:100%;margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.666rem;}h1{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.666rem;color:hsla(0,0%,0%,0.8);font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;font-weight:bold;text-rendering:optimizeLegibility;font-size:1.5rem;line-height:2.499rem;}h2{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.666rem;color:hsla(0,0%,0%,0.8);font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;font-weight:bold;text-rendering:optimizeLegibility;font-size:1.27542rem;line-height:1.666rem;}h3{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.666rem;color:hsla(0,0%,0%,0.8);font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;font-weight:bold;text-rendering:optimizeLegibility;font-size:1.17608rem;line-height:1.666rem;}h4{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.666rem;color:hsla(0,0%,0%,0.8);font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;font-weight:bold;text-rendering:optimizeLegibility;font-size:1rem;line-height:1.666rem;}h5{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.666rem;color:hsla(0,0%,0%,0.8);font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;font-weight:bold;text-rendering:optimizeLegibility;font-size:0.92211rem;line-height:1.666rem;}h6{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.666rem;color:hsla(0,0%,0%,0.8);font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;font-weight:bold;text-rendering:optimizeLegibility;font-size:0.88547rem;line-height:1.666rem;}hgroup{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.666rem;}ul{margin-left:1.666rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.666rem;list-style-position:outside;list-style-image:none;}ol{margin-left:1.666rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.666rem;list-style-position:outside;list-style-image:none;}dl{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.666rem;}dd{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.666rem;}p{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.666rem;}figure{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.666rem;}pre{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.666rem;font-size:0.85rem;line-height:1.666rem;}table{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.666rem;font-size:1rem;line-height:1.666rem;border-collapse:collapse;width:100%;}fieldset{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.666rem;}blockquote{margin-left:1.666rem;margin-right:1.666rem;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.666rem;}form{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.666rem;}noscript{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.666rem;}iframe{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.666rem;}hr{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:calc(1.666rem - 1px);background:hsla(0,0%,0%,0.2);border:none;height:1px;}address{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.666rem;}b{font-weight:bold;}strong{font-weight:bold;}dt{font-weight:bold;}th{font-weight:bold;}li{margin-bottom:calc(1.666rem / 2);}ol li{padding-left:0;}ul li{padding-left:0;}li > ol{margin-left:1.666rem;margin-bottom:calc(1.666rem / 2);margin-top:calc(1.666rem / 2);}li > ul{margin-left:1.666rem;margin-bottom:calc(1.666rem / 2);margin-top:calc(1.666rem / 2);}code{font-size:0.85rem;line-height:1.666rem;}kbd{font-size:0.85rem;line-height:1.666rem;}samp{font-size:0.85rem;line-height:1.666rem;}abbr{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}acronym{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}abbr[title]{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;text-decoration:none;}thead{text-align:left;}td,th{text-align:left;border-bottom:1px solid hsla(0,0%,0%,0.12);font-feature-settings:tnum;padding-left:1.11067rem;padding-right:1.11067rem;padding-top:0.833rem;padding-bottom:calc(0.833rem - 1px);}th:first-child,td:first-child{padding-left:0;}th:last-child,td:last-child{padding-right:0;}</style><style>.header-link{color:hsla(0,0%,39%,.7)}.header-link:hover{color:#e2777a}#carbonads{height:100px;font-size:14px;width:300px;position:relative;background:#f0f0f0}.carbon-wrap{height:100px;display:-ms-flexbox;display:flex}.carbon-text{padding:5px 10px;max-height:80px;display:inline-block;overflow:hidden;line-height:1.3}.carbon-poweredby{color:hsla(0,0%,39%,.7);position:absolute;right:5px;bottom:0}@media all and (max-width:600px){#carbonads,.no-mobile{display:none}}@media all and (max-width:321px){html{font-size:100%!important}}.markdown pre{display:block;background:#fdf6e3;color:#657b83;overflow-y:hidden;padding:.2rem .5rem}.markdown pre code{background:none;border:none;border-radius:3px;display:inline-block;overflow:inherit;padding:0;white-space:inherit;word-wrap:normal;font-size:.7rem;line-height:1rem}code{border-radius:3px;white-space:pre;white-space:pre-wrap;white-space:pre-line;white-space:-pre-wrap;white-space:-o-pre-wrap;white-space:-moz-pre-wrap;white-space:-hp-pre-wrap;word-wrap:break-word;border:1px solid #ccc;display:inline;font-family:Inconsolata,monospace,serif;max-width:100%;overflow:auto;padding:0 .1625rem}.hljs,code{background:#fdf6e3;color:#657b83}.hljs{display:block;overflow-x:auto;padding:.5em}.hljs-comment,.hljs-quote{color:#93a1a1}.hljs-addition,.hljs-keyword,.hljs-selector-tag{color:#859900}.hljs-doctag,.hljs-literal,.hljs-meta .hljs-meta-string,.hljs-number,.hljs-regexp,.hljs-string{color:#2aa198}.hljs-name,.hljs-section,.hljs-selector-class,.hljs-selector-id,.hljs-title{color:#268bd2}.hljs-attr,.hljs-attribute,.hljs-class .hljs-title,.hljs-template-variable,.hljs-type,.hljs-variable{color:#b58900}.hljs-bullet,.hljs-link,.hljs-meta,.hljs-meta .hljs-keyword,.hljs-selector-attr,.hljs-selector-pseudo,.hljs-subst,.hljs-symbol{color:#cb4b16}.hljs-built_in,.hljs-deletion{color:#dc322f}.hljs-formula{background:#eee8d5}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}html{font-size:120%}body,h1,h2,h3,h4,h5,h6,p{font-family:brandon-grotesque,Brandon Grotesque,Helvetica Neue,Helvetica,Arial,Lucida Sans,Geneva,Verdana,sans-serif;text-rendering:optimizeLegibility}a{color:#e2777a;text-decoration:none}blockquote{border-left:5px solid #57a3e8;font-style:italic;background:#eee;font-weight:400;font-size:.9rem;padding:10px 20px;margin:0 0 30px -25px}h2,h3{color:#57a3e8}.explanation{padding:10px;background:#eee;border-radius:10px;margin:20px auto;font-size:.85em}.article-body .reading-img img{width:150px;float:right;margin:0 10px 20px}.article-body img{max-height:200px;display:block;margin:40px auto 20px}.article-body img.full-width{max-height:none}.article-body img.half-width{max-height:none;width:50%}.mc-field-group{width:400px;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;-ms-flex-pack:start;justify-content:flex-start;-ms-flex-align:start;align-items:flex-start;padding:8px 0}.mc-field-group input{border-radius:3px;max-width:350px;width:80vw;border:1px solid #ccc}.mc-field-group label{font-size:.9em;font-weight:600}#mc-embedded-subscribe{color:#fff;background:#57a3e8;border-radius:4px;border:0;padding:5px 10px;margin:20px 0;cursor:pointer}#mc-embedded-subscribe:hover{background:#3e8acf}</style></head><body class="landing-page" style="background:#FCFCFC;padding:0 10px;"><div id="react-mount"><div style="max-width:39.984rem;margin-left:auto;margin-right:auto;padding:2.499rem 1.2495rem;" data-reactroot="" data-reactid="1" data-react-checksum="1720642007"><div style="display:flex;padding-bottom:0.5rem;margin-bottom:0.5rem;" data-reactid="2"><div style="flex-grow:3;display:flex;flex-direction:column;justify-content:space-around;" data-reactid="3"><h3 style="margin:0;padding-bottom:0;" data-reactid="4"><a style="box-shadow:none;text-decoration:none;color:inherit;" href="/" data-reactid="5">benmccormick.org</a></h3><div style="color:rgba(100,100,100, 0.7);" data-reactid="6"><a class="header-link" href="/subscribe/" data-reactid="7">Subscribe</a><span style="padding:0 0.33rem;" data-reactid="8">•</span><a class="header-link" href="/readinglist/" data-reactid="9">Reading List</a><span style="padding:0 0.33rem;" data-reactid="10">•</span><a class="header-link" href="http://twitter.com/ben336" data-reactid="11">Twitter</a><span style="padding:0 0.33rem;" data-reactid="12">•</span><a class="header-link" href="/about/" data-reactid="13">About</a></div></div><div style="flex-shrink:2;" data-reactid="14"><span data-reactid="15"></span></div></div><div class="markdown" data-reactid="16"><!-- react-empty: 17 --><h5 style="display:block;color:rgba(100,100,100, 0.7);margin-bottom:0.4165rem;" data-reactid="18">July 27, 2014</h5><h1 style="margin-top:0;margin-bottom:1rem;" data-reactid="19">Learning Vim in 2014: Copy and Paste the Vim Way</h1><div class="article-body" data-reactid="20"><p>If you’ve been following <a href="http://benmccormick.org/tag/learning-vim-in-2014/">my series on Vim</a>, it should be clear now that Vim has a pretty clear philosophy of how text editing should work. It’s based on the Unix philosophy of small composable tools, and doesn’t necessarily match up with the conventions that other editors use for common commands.  So it’s probably not surprising that Vim has its own way of handling copy and paste operations, and in fact doesn’t even use those terms.  Vim’s copy and paste handling is minimalist, composable, and powerful, but most people take some time to adjust to it.  I’m going to walk through the basics here, along with a few advanced features that are worth knowing about.</p>
<p>The primary Vim commands for copying something are <code>y</code> (yank) which acts like most people’s view of copy, and the delete/substitute commands <code>d</code> (delete),<code>c</code> (change), <code>x</code> (single character delete), and <code>s</code> (substitute), which unintuitively all act like the more common concept of “cut”.  These can be <a href="http://benmccormick.org/2014/07/16/learning-vim-in-2014-vim-as-art/">composed with motion commands to select different regions</a>.</p>
<p>Any Vim command that deletes text will also save a copy of that text unless you specifically tell it not too.  The idiomatic Vim method of deleting without copying is <code>&quot;_d</code>, which probably sounds bizarre.  We’ll come back to that later, and you’ll see that it makes sense in the bigger scheme of Vim’s copy and paste system.</p>
<p>The basic Vim commands for paste are <code>p</code> (put) which pastes after of the current character/line and <code>P</code> which pastes before the current character/line.  Vim auto detects whether you’ve yanked text on a line by line basis or a character by character basis, and pastes accordingly. Basically, if you select only full lines it will paste line by line and not break on the cursor position, if you select any partial lines it will paste at the character level, starting or ending at the current cursor location.  Note that <code>p</code> also works in visual mode, where it will replace the current selection.</p>
<p>All of this leads to a very common annoyance for new Vim users.  They’re editing a document and yank some text.  Then they go to a new location, delete a few lines, and hit <code>p</code> to replace them with the copied text.  Do you see the problem?  The text that is “put” is not what they originally yanked, but instead it’s the contents of their last delete action. Obviously this can be worked around by changing the order of the actions, but it’s frustrating to users who are used to being able to easily delete without blowing away their paste action.  Even more frustrating is when an experienced Vim user comes by and tells them the answer to their problem is to just type <code>&quot;0p</code> instead. Which will in fact put the correct text. So what’s going on with the weird syntax for these basic action?</p>
<h4>Registers</h4>
<p>What we’re missing is a clear understanding of how Vim handles copy and paste operations.  So let’s clarify.  Unlike most modern systems, which have a clipboard that holds a single value, Vim can store the values of yank and delete commands in one of many registers.  It has 26 normal registers, which correspond to the letters of the alphabet, and several “special” registers.  One of those special registers is the default register, which is where yank and delete commands store their content by default.  Other registers can be accessed with the <code>&quot;&lt;char&gt;</code> prefix that we’ve already seen.  So in the above example, the text from the initial example is moved into the default register, and then replaced there by the deleted text.  But it remains in the 0 register, which always points to the last “yanked” text, ignoring text gained by deleting.</p>
<p>The 26 alphabetical registers serve as great “medium term” storage.  You can use them to yank something that you want to have around for a while, and then put it in a few different places, even if you’re yanking and deleting other things in the meantime.  These will even persist across sessions as long as you have the <code>nocompatible</code> option set in your vimrc file.  However if you overwrite one, there’s no easy way to get it back.</p>
<p>One cool feature of registers is the built in ability to append to the end of them.  If you want to add text to an existing register, for instance if you missed part of the text you wanted to yank, you can do so by capitalizing the register.  So if you had deleted a line and put it in the <code>a</code> register with <code>&quot;add</code>, but meant to include a second line, you could then delete the next line and append it to the register with <code>&quot;Add</code>. <code>&quot;ap</code> would then put the 2 lines back into the document.</p>
<h4>Special Registers</h4>
<p>In addition to the alphabetical registers, there are several <em>special registers</em> that are worth knowing about.  I already mentioned the default register, which most Vim users know about, even if they don’t understand exactly how registers work.  Other important registers are the clipboard register, the black hole register, and the numbered registers.</p>
<p>If you have to learn one special register, learn the clipboard register.  One of the first things people notice about copy and paste in Vim is that it doesn’t interact nicely with other applications’ copy and paste by default.  If you yank a line of text in Vim, it’s not added to the system clipboard.  If you copy some code from Stack Overflow and try to paste it in Vim with <code>p</code>, it won’t work <sup id="fnref:1"><a href="#fn:1">1</a></sup>.  But, since we know about registers, it makes sense that the default register might not be mapped to the clipboard, which we don’t want getting blasted away everytime we delete a character.</p>
<p>Vim isn’t completely disconnected from the system clipboard though.  The clipboard register <code>+</code> is Vim’s proxy to your system clipboard.  So <code>&quot;+y&lt;motion&gt;</code> and <code>&quot;+p</code> act like traditional copy and paste.  Your version of Vim does have to be compiled with clipboard support in order to use the <code>+</code> register. You can check to see if you have clipboard support with <code>:echo has('clipboard').</code><sup id="fnref:2"><a href="#fn:2">2</a></sup> On OSX you can use MacVim to get clipboard support, since the default version of Vim shipped with OSX is not compiled with it.  On other operating systems you’ll have to investigate the easiest way to install with clipboard support if your version doesn’t have it.  It should be enabled for most modern mainstream distributions.</p>
<p>Another register to quickly note is the black hole register <code>_</code>.  The black hole register, as you would expect, doesn’t retain what’s passed to it.  So <code>&quot;_y</code> and <code>&quot;_p</code> are no-ops, and <code>&quot;_d</code> is “true delete”, as opposed to the delete commands default “cut” like behavior.  Of course since most people don’t use all 26 alphabetical registers, you can also achieve effective true delete by deleting to any unused register.</p>
<p>Finally, the number keys also have special register functionality.  You can’t yank text directly to a numbered register.  Instead the <code>0</code> register contains the last yanked text, and the <code>1</code> through <code>9</code> registers contain the last 9 deleted chunks of text.  This feature is a cool idea, but unfortunately the implementation is inconsistent and a bit weird.  For one thing the distinction between yanked and deleted text seems arbitrary, and since they act the same in other ways, puts an added cognitive load on the user to remember which one they used.  Secondly, for whatever reason, deletions that span less than a line get special behavior.  If you delete these to an alphabetical register, they’re saved to <code>&quot;1</code> just like any other delete.  But if you delete them to the default register, they’re saved to <code>&quot;-</code> and not put in <code>&quot;1</code>.  The logic is complicated enough that the numbered registers become tough to use in day to day tasks, and I’ll have to agree with Drew Neil in labeling them one of Vim’s <a href="http://vimcasts.org/blog/2013/11/registers-the-good-the-bad-and-the-ugly-parts/">“bad parts.”</a></p>
<h4>Macros</h4>
<p>One last important thing to know about registers is that along with being used for copy and paste, they serve as a place to save macros, Vim’s reusable command language.  You can save a macro by typing <code>q&lt;register key&gt;&lt;commands&gt;q</code>, and the macro will be saved to the register.  Like yank and delete, capitalizing the register name will let you append to the register instead of replacing it. So there’s a few things you should know about that.  One, if you use macros, don’t save macros to the same registers that you use for copy and paste.  If you use the <code>y</code> register a lot for the convenience of <code>&quot;yy&lt;motion&gt;</code>, don’t use <code>qy</code> to save your macro unless you’re ok with it being blown away by your next yank.  Two, the sharing of registers allows you to copy text to use as a macro.  So if you for instance wanted to have a file with a list of common operations, it would be easy to go to that file, copy a line, and then execute it as a macro.  This isn’t the first thing most people will want to do, but it illustrates the power and flexibility that come when you start combining Vim’s tools.</p>
<hr>
<h3>More Resources</h3>
<ul>
<li>
<p>For a more in depth look at Vim’s special registers, including a bunch I didn’t cover here, you can check out this great <a href="http://blog.sanctum.geek.nz/advanced-vim-registers/">roundup</a></p>
</li>
<li>
<p><a href="http://vimcasts.org/categories/copy-and-paste/">Vimcasts</a> has a whole series of posts on copy and paste in Vim.</p>
</li>
</ul>
<hr>
<h3>Subscribe</h3>
<p>This was the seventh entry in a series of posts on learning Vim in a modern way.  If you enjoyed the post, please consider subscribing by using the <a href="http://feedpress.me/benmccormick">feed</a>, <a href="http://twitter.com/benmccormickorg">Twitter</a> or my <a href="http://eepurl.com/WFYon">mailing list</a>. Also check out the <a href="http://benmccormick.org/2014/08/04/learning-vim-in-2014-search/">next post</a> in the series.</p>
<hr>
<div class="footnotes">
<ol>
    <li class="footnote" id="fn:1">
        <p>
        Of course some people would probably see that as a feature, not a bug
    	<a href="#fnref:1" title="return to article"> ↩</a></p>
    </li>
    <li class="footnote" id="fn:2">
        <p>
        Thanks to schweinschmeisser on Reddit for reminding me to add a way to check for support.
    	<a href="#fnref:2" title="return to article"> ↩</a></p>
    </li>
</ol>
</div>
</div><hr style="margin-bottom:3.332rem;" data-reactid="21"/><noscript data-reactid="22"></noscript><p style="margin-bottom:4.165rem;" data-reactid="23"><!-- react-text: 24 -->Written by <!-- /react-text --><!-- react-text: 25 -->Ben McCormick<!-- /react-text --></p><div title="Learning Vim in 2014: Copy and Paste the Vim Way" data-reactid="26"><div id="disqus_thread" data-reactid="27"></div><noscript data-reactid="28"><span data-reactid="29"><!-- react-text: 30 -->Please enable JavaScript to view the<!-- /react-text --><a href="http://disqus.com/?ref_noscript" data-reactid="31">comments powered by Disqus.</a></span></noscript><a href="http://disqus.com" class="dsq-brlink" data-reactid="32"><!-- react-text: 33 -->Blog comments powered by <!-- /react-text --><span class="logo-disqus" data-reactid="34">Disqus</span><!-- react-text: 35 -->.<!-- /react-text --></a></div></div><span style="display:block;clear:both;" data-reactid="36"> </span></div></div><script src="/bundle.js?t=1481258681430"></script><script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-37323973-1', 'auto');
            ga('send', 'pageview');
        </script></body></html>