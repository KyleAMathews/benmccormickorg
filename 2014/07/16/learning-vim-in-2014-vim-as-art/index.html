<!DOCTYPE html>
 <html lang="en"><head><meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png?v=yyxgnp97qG"/><link rel="icon" type="image/png" href="/favicon-32x32.png?v=yyxgnp97qG" sizes="32x32"/><link rel="icon" type="image/png" href="/favicon-16x16.png?v=yyxgnp97qG" sizes="16x16"/><link rel="manifest" href="/manifest.json?v=yyxgnp97qG"/><link rel="mask-icon" href="/safari-pinned-tab.svg?v=yyxgnp97qG" color="#57a3e8"/><link rel="shortcut icon" href="/favicon.ico?v=yyxgnp97qG"/><meta name="theme-color" content="#ffffff"/><script type="text/javascript" src="//use.typekit.net/msd6bqv.js"></script><script type="text/javascript">try{Typekit.load();}catch(e){}</script><title data-react-helmet="true">Learning Vim in 2014: Vim as Art | benmccormick.org</title><meta data-react-helmet="true" name="description" content="How using Vim is more of an artform than a science"/><meta data-react-helmet="true" name="keywords" content="vim dot command"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:site" content="@benmccormickorg"/><meta data-react-helmet="true" name="twitter:creator" content="@ben336"/><meta data-react-helmet="true" name="twitter:title" content="Learning Vim in 2014: Vim as Art"/><meta data-react-helmet="true" name="twitter:description" content="How using Vim is more of an artform than a science"/><meta data-react-helmet="true" name="twitter:image" content="http://benmccormick.org/logo.png"/><script data-react-helmet="true" type="application/ld+json">{
                "@context": "http://schema.org"
                "@type": "BlogPosting",
                "headline": "Learning Vim in 2014: Vim as Art",
                "genre": "Software Development",
                "keywords": "vim dot command",
                "url": "http://benmccormick.org/2014/07/16/learning-vim-in-2014-vim-as-art/",
                "image": "http://benmccormick.org/logo.png",
                "datePublished": "2014-07-16",
                "description": "How using Vim is more of an artform than a science",
                "articleBody": "<p>How do you feel about being efficient?  If you’re reading this blog, I bet you like it.  What if I told you your text editor could help you cut the amount of time you spend typing in half, with just a little reading and a bit of practice?  For you Vim users, it’s very possible that you’re spending way more time typing than needed.</p>
<p>The software developers reading this have probably heard of the <em>Don’t Repeat Yourself</em> principle.  Developers want to avoid duplicating work, and try to write each distinct meaningful chunk of code only once.  DRY is extremely powerful when it comes to code, but it’s also a very useful principle in text editing.  Much of the editing work we do is extremely repetitive. Vim can help you remove those inefficiencies.</p>
<p>If Vim’s composable commands are the <a href=\"http://benmccormick.org/2014/07/02/learning-vim-in-2014-vim-as-language/\">language of Vim</a>, then repeating commands are it’s art.  For pretty much any thing you do in Vim, there are ways to automate and repeat it.  These “repeating commands” are powerful tools, but it’s not always easy to know what to do with them.  There aren’t simple rules you can learn for when to use repeating commands.  Instead it takes practice, awareness, and experience.</p>
<p>All of Vim’s commands are designed to be repeatable and undoable.  So if you find yourself typing something a lot, there is likely to be a good solution for making it easier and faster.  I’m going to lay out the tools for doing that, along with a few hints for knowing when to use them.</p>
<h4>Repetition Basics: The dot command</h4>
<p>The most important Vim tool for repetition is the dot command.  Pressing <code>.</code> at any time will repeat the last native command you used in Vim.  How is this useful?  Let’s say we’re faced with the following code</p>
<pre><code class=\"language-javascript\"><span class=\"hljs-keyword\">var</span> widget = <span class=\"hljs-keyword\">new</span> Widget();
<span class=\"hljs-keyword\">var</span> widgets = <span class=\"hljs-keyword\">new</span> WidgetCollection();
widgets.push(widget);
<span class=\"hljs-keyword\">if</span>(widget.test()) {
    sendMessage(<span class=\"hljs-string\">'widget passed test'</span>);
}
</code></pre>
<p>If we want to rename the <code>widget</code> variable to be more informative, how could we go about it? We’ll ignore “language-wise” refactoring solutions, like <a href=\"http://ternjs.net/\">ternjs</a>, and look at the basic Vim options.</p>
<p>A simple find and replace causes problems.  We can’t distinguish between the widget we want and other occurences.  <code>:%s/widget/testWidget/g</code> results in plenty of unwanted changes.</p>
<pre><code class=\"language-javascript\"><span class=\"hljs-keyword\">var</span> testWidget = <span class=\"hljs-keyword\">new</span> Widget();
<span class=\"hljs-keyword\">var</span> testWidgets = <span class=\"hljs-keyword\">new</span> WidgetCollection();
testWidgets.push(testWidget);
<span class=\"hljs-keyword\">if</span>(testWidget.test()) {
    sendMessage(<span class=\"hljs-string\">'testWidget passed test'</span>);
}
</code></pre>
<p>It might be possible to find a complex regex that only hit the variables we want, but thats suddenly a lot of thought for what should be a simple change.  We could go one by one and knock out each word one by one.  But that would be a lot of repeated typing of <code>testWidget</code>.  So what can we do?</p>
<p>The dot command is a nice solution.  If we start on the first occurence of <code>widget</code>, we can use <code>ciw</code> to replace the current word with new text.  When we’ve added our new text and exit insert mode, we’ll have a <em>command</em>, which we can then repeat with <code>.</code>. After that we can move to the next occurence we want to change and hit <code>.</code> to replace it without retyping the variable name.  If we accidentally use it in the wrong place, it’s easy to undo with <code>u</code>.</p>
<p>Of course it would still be a pain to navigate between each widget with hjkl.  Fortunately, Vim has more commands that allow us to avoid unecessary work.  If we start on one instance of <code>widget</code>, we can use <code>*</code> to search for all occurences of that word.  We can then use <code>n</code> to move from occurence to occurence. If we overshoot and go too far, we can use <code>N</code> to go backwards.  So if we start with <code>*</code> (shift+8 in the gif below) and then use ciw to replace the word, we can then use <code>n</code> and <code>.</code> to clean up the other widgets in only 5 keystrokes.</p>
<img alt=\"vim gif\" src=\"/posts/images/vimdotcommand.gif\" class=\"full-width\">
<h4>The Vim Way</h4>
<p>If you’re used to another editor, I’m guessing you’re justifiably a bit skeptical at this point.  After all, this example is something people do all the time, and many editors have tools to make it easy (multiple selections in Sublime Text and refactoring tools in language specific IDEs like Eclipse for instance).  They may take even fewer keystrokes than Vim. And they don’t require you to learn 6 separate commands to use well.  So what’s so special here?</p>
<p>Let’s have a quick refresher on the philosophy of Vim.  Like the Unix ecosystem it came from, Vim provides <strong>small</strong>, <strong>composable</strong> tools that you can combine to create powerful actions.  The power isn’t in a specific use case.  Instead it comes from the range of possibilities that open up when we start mixing and matching the code.  As with verbs, movements, and text objects, repeating commands and their corresponding reverse commands are tools we can add to our toolbox.  Using the commands above and some of the other composable commands from my <a href=\"http://benmccormick.org/2014/07/02/learning-vim-in-2014-vim-as-language/\">language post</a>, we can do some cool things.</p>
<p>We can:</p>
<ul>
<li>Search through json files and selectively remove lines that contain an attribute we don’t want to use (start on the attribute, <code>*</code>,<code>dd</code>, then use <code>n</code> and <code>.</code> repeatedly to select lines to delete)</li>
<li>Replace a long, hard to type function name throughout the document with another version without having to type out the function name (start on the function name, <code>*</code>,<code>:%s//&lt;newname&gt;/g</code>)</li>
<li>Fix poorly indented lines using the <code>.</code> command (<code>&gt;&gt;</code> or <code>&lt;&lt;</code>, <code>.</code> repeatedly, <code>u</code> to undo if you go too far. This can easily be used on groups of lines using visual mode too)</li>
</ul>
<p>What do all of these have in common?  They all use a command once, and a movement at most once, then allow for as much repetition as you like.  In <a href=\"http://www.amazon.com/gp/product/1934356980/ref=as_li_tl?ie=UTF8&amp;camp=1789&amp;creative=390957&amp;creativeASIN=1934356980&amp;linkCode=as2&amp;tag=benmccormicko-20&amp;linkId=FE3JFKHYVRYCUOVS\">Practical Vim</a>, Drew Neil encourages actively thinking about making your actions repeatable.  In many scenarios, once you’ve made a change and movement once, you can then get by with a single keystroke for each future action and movement, with another keystroke available to cancel an action if you go too far.  Here’s a partial list of repeating commands, with the corresponding cancel command to undo them.</p>
<table>
<tr><th>Repeating Command</th><th>Purpose</th><th>Canceling Command</th></tr>
<tr><td>.</td><td>Repeat the last normal mode command</td><td>u</td></tr>
<tr><td>n</td><td>Repeat the last Search</td><td>N</td></tr>
<tr><td>;</td><td>Repeat the last character-wise search</td><td>,</td></tr>
<tr><td>/<replacement>/</td><td>Repeat the last search</td><td>N/A</td></tr>
<tr><td>@:</td><td>Repeat the last ex-mode command</td><td>N/A</td></tr>
<tr><td>@@</td><td>Repeat the last Macro used</td><td>u</td></tr>
</table>
<p>None of these commands are all that useful on their own, but they’re each valuable things to learn as you build up your Vim toolbox. Focus on one or two to start, and learn to make edits so that you can easily repeat them. The art of Vim is learning to look for those opportunities, and crafting your commands so that they’re short, powerful, and repeatable.</p>
<hr>
<h3>More Resources</h3>
<ul>
<li>Some of you are probably confused that I wrote a whole post on repeating commands in Vim with only one side-reference to Macros.  Macros are Vim’s DRY power tool, and different enough from the rest of these commands that I didn’t want to lump it all together.  But for those interested, Drew Neil has a <a href=\"http://vimcasts.org/episodes/converting-markdown-to-structured-html-with-a-macro/\">great screencast</a> on how to build a good Vim macro.</li>
<li>On a similar note, Drew’s book <a href=\"http://www.amazon.com/gp/product/1934356980/ref=as_li_tl?ie=UTF8&amp;camp=1789&amp;creative=390957&amp;creativeASIN=1934356980&amp;linkCode=as2&amp;tag=benmccormicko-20&amp;linkId=FE3JFKHYVRYCUOVS\">Practical Vim</a> is the best guide I’ve found on making good use of repetition in Vim.  I learned plenty of the stuff in this article from that book.  For those who don’t want to pay, I’m currently giving <a href=\"http://benmccormick.org/2014/07/11/new-twitter-feed-and-practical-vim-giveaway/\">new subscribers a chance to win 2 copies of the book</a>.  You can also see more about repetition from Drew online at <a href=\"http://vimcasts.org/categories/repetition/\">Vimcasts</a>.</li>
<li>Tim Pope has published a plugin that allows you to extend the dot command to work on arbitrary user commands.  It also works out of the box with many of his other plugins.  You can see it on <a href=\"https://github.com/tpope/vim-repeat\">Github</a>.</li>
</ul>
<hr>
<h3>Subscribe</h3>
<p>This was the fifth in a series of posts on learning Vim in a modern way.  If you enjoyed the post consider subscribing by using the <a href=\"http://feedpress.me/benmccormick\">feed</a>,  with <a href=\"http://twitter.com/benmccormickorg\">Twitter</a> or by joining my <a href=\"http://eepurl.com/WFYon\">mailing list</a>.  Also check out the <a href=\"http://benmccormick.org/2014/07/21/learning-vim-in-2014-getting-more-from-vim-with-plugins/\">next post</a> in the series, covering the use of plugins in Vim.</p>
",
                  "author": {
                    "@type": "Person",
                    "name": "Ben McCormick"
                    "email": "mailto:ben@benmccormick.org",
                    "image": "/profile_pic.jpg",
                    "jobTitle": "Software Engineer",
                    "alumniOf": "Duke",
                    "birthPlace": "Pittsburgh, PA",
                    "gender": "male",
                    "url": "http://benmccormick.org",
              	    "sameAs" : [
                      "https://www.linkedin.com/in/benmccormick",
                      "http://twitter.com/ben336",
                    ]
                 }
              }</script><style id="typography.js">html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{background-color:transparent;-webkit-text-decoration-skip:objects}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font-size:112.5%;line-height:1.666em;box-sizing:border-box;overflow-y:scroll;}*{box-sizing:inherit;}*:before{box-sizing:inherit;}*:after{box-sizing:inherit;}body{color:hsla(0,0%,0%,0.8);font-family:georgia,serif;font-weight:normal;word-wrap:break-word;}img{max-width:100%;margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.666rem;}h1{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.666rem;color:hsla(0,0%,0%,0.8);font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;font-weight:bold;text-rendering:optimizeLegibility;font-size:1.5rem;line-height:2.499rem;}h2{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.666rem;color:hsla(0,0%,0%,0.8);font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;font-weight:bold;text-rendering:optimizeLegibility;font-size:1.27542rem;line-height:1.666rem;}h3{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.666rem;color:hsla(0,0%,0%,0.8);font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;font-weight:bold;text-rendering:optimizeLegibility;font-size:1.17608rem;line-height:1.666rem;}h4{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.666rem;color:hsla(0,0%,0%,0.8);font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;font-weight:bold;text-rendering:optimizeLegibility;font-size:1rem;line-height:1.666rem;}h5{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.666rem;color:hsla(0,0%,0%,0.8);font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;font-weight:bold;text-rendering:optimizeLegibility;font-size:0.92211rem;line-height:1.666rem;}h6{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.666rem;color:hsla(0,0%,0%,0.8);font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;font-weight:bold;text-rendering:optimizeLegibility;font-size:0.88547rem;line-height:1.666rem;}hgroup{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.666rem;}ul{margin-left:1.666rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.666rem;list-style-position:outside;list-style-image:none;}ol{margin-left:1.666rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.666rem;list-style-position:outside;list-style-image:none;}dl{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.666rem;}dd{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.666rem;}p{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.666rem;}figure{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.666rem;}pre{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.666rem;font-size:0.85rem;line-height:1.666rem;}table{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.666rem;font-size:1rem;line-height:1.666rem;border-collapse:collapse;width:100%;}fieldset{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.666rem;}blockquote{margin-left:1.666rem;margin-right:1.666rem;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.666rem;}form{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.666rem;}noscript{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.666rem;}iframe{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.666rem;}hr{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:calc(1.666rem - 1px);background:hsla(0,0%,0%,0.2);border:none;height:1px;}address{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.666rem;}b{font-weight:bold;}strong{font-weight:bold;}dt{font-weight:bold;}th{font-weight:bold;}li{margin-bottom:calc(1.666rem / 2);}ol li{padding-left:0;}ul li{padding-left:0;}li > ol{margin-left:1.666rem;margin-bottom:calc(1.666rem / 2);margin-top:calc(1.666rem / 2);}li > ul{margin-left:1.666rem;margin-bottom:calc(1.666rem / 2);margin-top:calc(1.666rem / 2);}code{font-size:0.85rem;line-height:1.666rem;}kbd{font-size:0.85rem;line-height:1.666rem;}samp{font-size:0.85rem;line-height:1.666rem;}abbr{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}acronym{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}abbr[title]{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;text-decoration:none;}thead{text-align:left;}td,th{text-align:left;border-bottom:1px solid hsla(0,0%,0%,0.12);font-feature-settings:tnum;padding-left:1.11067rem;padding-right:1.11067rem;padding-top:0.833rem;padding-bottom:calc(0.833rem - 1px);}th:first-child,td:first-child{padding-left:0;}th:last-child,td:last-child{padding-right:0;}</style><style>.header-link{color:hsla(0,0%,39%,.7)}.header-link:hover{color:#e2777a}#carbonads{height:100px;font-size:14px;width:300px;position:relative;background:#f0f0f0}.carbon-wrap{height:100px;display:-ms-flexbox;display:flex}.carbon-text{padding:5px 10px;max-height:80px;display:inline-block;overflow:hidden;line-height:1.3}.carbon-poweredby{color:hsla(0,0%,39%,.7);position:absolute;right:5px;bottom:0}@media all and (max-width:600px){#carbonads,.no-mobile{display:none}}@media all and (max-width:321px){html{font-size:100%!important}}.markdown pre{display:block;background:#fdf6e3;color:#657b83;overflow-y:hidden;padding:.2rem .5rem}.markdown pre code{background:none;border:none;border-radius:3px;display:inline-block;overflow:inherit;padding:0;white-space:inherit;word-wrap:normal;font-size:.7rem;line-height:1rem}code{border-radius:3px;white-space:pre;white-space:pre-wrap;white-space:pre-line;white-space:-pre-wrap;white-space:-o-pre-wrap;white-space:-moz-pre-wrap;white-space:-hp-pre-wrap;word-wrap:break-word;border:1px solid #ccc;display:inline;font-family:Inconsolata,monospace,serif;max-width:100%;overflow:auto;padding:0 .1625rem}.hljs,code{background:#fdf6e3;color:#657b83}.hljs{display:block;overflow-x:auto;padding:.5em}.hljs-comment,.hljs-quote{color:#93a1a1}.hljs-addition,.hljs-keyword,.hljs-selector-tag{color:#859900}.hljs-doctag,.hljs-literal,.hljs-meta .hljs-meta-string,.hljs-number,.hljs-regexp,.hljs-string{color:#2aa198}.hljs-name,.hljs-section,.hljs-selector-class,.hljs-selector-id,.hljs-title{color:#268bd2}.hljs-attr,.hljs-attribute,.hljs-class .hljs-title,.hljs-template-variable,.hljs-type,.hljs-variable{color:#b58900}.hljs-bullet,.hljs-link,.hljs-meta,.hljs-meta .hljs-keyword,.hljs-selector-attr,.hljs-selector-pseudo,.hljs-subst,.hljs-symbol{color:#cb4b16}.hljs-built_in,.hljs-deletion{color:#dc322f}.hljs-formula{background:#eee8d5}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}html{font-size:120%}body,h1,h2,h3,h4,h5,h6,p{font-family:brandon-grotesque,Brandon Grotesque,Helvetica Neue,Helvetica,Arial,Lucida Sans,Geneva,Verdana,sans-serif;text-rendering:optimizeLegibility}a{color:#e2777a;text-decoration:none}blockquote{border-left:5px solid #57a3e8;font-style:italic;background:#eee;font-weight:400;font-size:.9rem;padding:10px 20px;margin:0 0 30px -25px}h2,h3{color:#57a3e8}.explanation{padding:10px;background:#eee;border-radius:10px;margin:20px auto;font-size:.85em}.article-body .reading-img img{width:150px;float:right;margin:0 10px 20px}.article-body img{max-height:200px;display:block;margin:40px auto 20px}.article-body img.full-width{max-height:none}.article-body img.half-width{max-height:none;width:50%}.mc-field-group{width:400px;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;-ms-flex-pack:start;justify-content:flex-start;-ms-flex-align:start;align-items:flex-start;padding:8px 0}.mc-field-group input{border-radius:3px;max-width:350px;width:80vw;border:1px solid #ccc}.mc-field-group label{font-size:.9em;font-weight:600}#mc-embedded-subscribe{color:#fff;background:#57a3e8;border-radius:4px;border:0;padding:5px 10px;margin:20px 0;cursor:pointer}#mc-embedded-subscribe:hover{background:#3e8acf}</style></head><body class="landing-page" style="background:#FCFCFC;padding:0 10px;"><div id="react-mount"><div style="max-width:39.984rem;margin-left:auto;margin-right:auto;padding:2.499rem 1.2495rem;" data-reactroot="" data-reactid="1" data-react-checksum="1149207895"><div style="display:flex;padding-bottom:0.5rem;margin-bottom:0.5rem;" data-reactid="2"><div style="flex-grow:3;display:flex;flex-direction:column;justify-content:space-around;" data-reactid="3"><h3 style="margin:0;padding-bottom:0;" data-reactid="4"><a style="box-shadow:none;text-decoration:none;color:inherit;" href="/" data-reactid="5">benmccormick.org</a></h3><div style="color:rgba(100,100,100, 0.7);" data-reactid="6"><a class="header-link" href="/subscribe/" data-reactid="7">Subscribe</a><span style="padding:0 0.33rem;" data-reactid="8">•</span><a class="header-link" href="/readinglist/" data-reactid="9">Reading List</a><span style="padding:0 0.33rem;" data-reactid="10">•</span><a class="header-link" href="http://twitter.com/ben336" data-reactid="11">Twitter</a><span style="padding:0 0.33rem;" data-reactid="12">•</span><a class="header-link" href="/about/" data-reactid="13">About</a></div></div><div style="flex-shrink:2;" data-reactid="14"><span data-reactid="15"></span></div></div><div class="markdown" data-reactid="16"><!-- react-empty: 17 --><h5 style="display:block;color:rgba(100,100,100, 0.7);margin-bottom:0.4165rem;" data-reactid="18">July 16, 2014</h5><h1 style="margin-top:0;margin-bottom:1rem;" data-reactid="19">Learning Vim in 2014: Vim as Art</h1><div class="article-body" data-reactid="20"><p>How do you feel about being efficient?  If you’re reading this blog, I bet you like it.  What if I told you your text editor could help you cut the amount of time you spend typing in half, with just a little reading and a bit of practice?  For you Vim users, it’s very possible that you’re spending way more time typing than needed.</p>
<p>The software developers reading this have probably heard of the <em>Don’t Repeat Yourself</em> principle.  Developers want to avoid duplicating work, and try to write each distinct meaningful chunk of code only once.  DRY is extremely powerful when it comes to code, but it’s also a very useful principle in text editing.  Much of the editing work we do is extremely repetitive. Vim can help you remove those inefficiencies.</p>
<p>If Vim’s composable commands are the <a href="http://benmccormick.org/2014/07/02/learning-vim-in-2014-vim-as-language/">language of Vim</a>, then repeating commands are it’s art.  For pretty much any thing you do in Vim, there are ways to automate and repeat it.  These “repeating commands” are powerful tools, but it’s not always easy to know what to do with them.  There aren’t simple rules you can learn for when to use repeating commands.  Instead it takes practice, awareness, and experience.</p>
<p>All of Vim’s commands are designed to be repeatable and undoable.  So if you find yourself typing something a lot, there is likely to be a good solution for making it easier and faster.  I’m going to lay out the tools for doing that, along with a few hints for knowing when to use them.</p>
<h4>Repetition Basics: The dot command</h4>
<p>The most important Vim tool for repetition is the dot command.  Pressing <code>.</code> at any time will repeat the last native command you used in Vim.  How is this useful?  Let’s say we’re faced with the following code</p>
<pre><code class="language-javascript"><span class="hljs-keyword">var</span> widget = <span class="hljs-keyword">new</span> Widget();
<span class="hljs-keyword">var</span> widgets = <span class="hljs-keyword">new</span> WidgetCollection();
widgets.push(widget);
<span class="hljs-keyword">if</span>(widget.test()) {
    sendMessage(<span class="hljs-string">'widget passed test'</span>);
}
</code></pre>
<p>If we want to rename the <code>widget</code> variable to be more informative, how could we go about it? We’ll ignore “language-wise” refactoring solutions, like <a href="http://ternjs.net/">ternjs</a>, and look at the basic Vim options.</p>
<p>A simple find and replace causes problems.  We can’t distinguish between the widget we want and other occurences.  <code>:%s/widget/testWidget/g</code> results in plenty of unwanted changes.</p>
<pre><code class="language-javascript"><span class="hljs-keyword">var</span> testWidget = <span class="hljs-keyword">new</span> Widget();
<span class="hljs-keyword">var</span> testWidgets = <span class="hljs-keyword">new</span> WidgetCollection();
testWidgets.push(testWidget);
<span class="hljs-keyword">if</span>(testWidget.test()) {
    sendMessage(<span class="hljs-string">'testWidget passed test'</span>);
}
</code></pre>
<p>It might be possible to find a complex regex that only hit the variables we want, but thats suddenly a lot of thought for what should be a simple change.  We could go one by one and knock out each word one by one.  But that would be a lot of repeated typing of <code>testWidget</code>.  So what can we do?</p>
<p>The dot command is a nice solution.  If we start on the first occurence of <code>widget</code>, we can use <code>ciw</code> to replace the current word with new text.  When we’ve added our new text and exit insert mode, we’ll have a <em>command</em>, which we can then repeat with <code>.</code>. After that we can move to the next occurence we want to change and hit <code>.</code> to replace it without retyping the variable name.  If we accidentally use it in the wrong place, it’s easy to undo with <code>u</code>.</p>
<p>Of course it would still be a pain to navigate between each widget with hjkl.  Fortunately, Vim has more commands that allow us to avoid unecessary work.  If we start on one instance of <code>widget</code>, we can use <code>*</code> to search for all occurences of that word.  We can then use <code>n</code> to move from occurence to occurence. If we overshoot and go too far, we can use <code>N</code> to go backwards.  So if we start with <code>*</code> (shift+8 in the gif below) and then use ciw to replace the word, we can then use <code>n</code> and <code>.</code> to clean up the other widgets in only 5 keystrokes.</p>
<img alt="vim gif" src="/posts/images/vimdotcommand.gif" class="full-width">
<h4>The Vim Way</h4>
<p>If you’re used to another editor, I’m guessing you’re justifiably a bit skeptical at this point.  After all, this example is something people do all the time, and many editors have tools to make it easy (multiple selections in Sublime Text and refactoring tools in language specific IDEs like Eclipse for instance).  They may take even fewer keystrokes than Vim. And they don’t require you to learn 6 separate commands to use well.  So what’s so special here?</p>
<p>Let’s have a quick refresher on the philosophy of Vim.  Like the Unix ecosystem it came from, Vim provides <strong>small</strong>, <strong>composable</strong> tools that you can combine to create powerful actions.  The power isn’t in a specific use case.  Instead it comes from the range of possibilities that open up when we start mixing and matching the code.  As with verbs, movements, and text objects, repeating commands and their corresponding reverse commands are tools we can add to our toolbox.  Using the commands above and some of the other composable commands from my <a href="http://benmccormick.org/2014/07/02/learning-vim-in-2014-vim-as-language/">language post</a>, we can do some cool things.</p>
<p>We can:</p>
<ul>
<li>Search through json files and selectively remove lines that contain an attribute we don’t want to use (start on the attribute, <code>*</code>,<code>dd</code>, then use <code>n</code> and <code>.</code> repeatedly to select lines to delete)</li>
<li>Replace a long, hard to type function name throughout the document with another version without having to type out the function name (start on the function name, <code>*</code>,<code>:%s//&lt;newname&gt;/g</code>)</li>
<li>Fix poorly indented lines using the <code>.</code> command (<code>&gt;&gt;</code> or <code>&lt;&lt;</code>, <code>.</code> repeatedly, <code>u</code> to undo if you go too far. This can easily be used on groups of lines using visual mode too)</li>
</ul>
<p>What do all of these have in common?  They all use a command once, and a movement at most once, then allow for as much repetition as you like.  In <a href="http://www.amazon.com/gp/product/1934356980/ref=as_li_tl?ie=UTF8&amp;camp=1789&amp;creative=390957&amp;creativeASIN=1934356980&amp;linkCode=as2&amp;tag=benmccormicko-20&amp;linkId=FE3JFKHYVRYCUOVS">Practical Vim</a>, Drew Neil encourages actively thinking about making your actions repeatable.  In many scenarios, once you’ve made a change and movement once, you can then get by with a single keystroke for each future action and movement, with another keystroke available to cancel an action if you go too far.  Here’s a partial list of repeating commands, with the corresponding cancel command to undo them.</p>
<table>
<tr><th>Repeating Command</th><th>Purpose</th><th>Canceling Command</th></tr>
<tr><td>.</td><td>Repeat the last normal mode command</td><td>u</td></tr>
<tr><td>n</td><td>Repeat the last Search</td><td>N</td></tr>
<tr><td>;</td><td>Repeat the last character-wise search</td><td>,</td></tr>
<tr><td>/<replacement>/</td><td>Repeat the last search</td><td>N/A</td></tr>
<tr><td>@:</td><td>Repeat the last ex-mode command</td><td>N/A</td></tr>
<tr><td>@@</td><td>Repeat the last Macro used</td><td>u</td></tr>
</table>
<p>None of these commands are all that useful on their own, but they’re each valuable things to learn as you build up your Vim toolbox. Focus on one or two to start, and learn to make edits so that you can easily repeat them. The art of Vim is learning to look for those opportunities, and crafting your commands so that they’re short, powerful, and repeatable.</p>
<hr>
<h3>More Resources</h3>
<ul>
<li>Some of you are probably confused that I wrote a whole post on repeating commands in Vim with only one side-reference to Macros.  Macros are Vim’s DRY power tool, and different enough from the rest of these commands that I didn’t want to lump it all together.  But for those interested, Drew Neil has a <a href="http://vimcasts.org/episodes/converting-markdown-to-structured-html-with-a-macro/">great screencast</a> on how to build a good Vim macro.</li>
<li>On a similar note, Drew’s book <a href="http://www.amazon.com/gp/product/1934356980/ref=as_li_tl?ie=UTF8&amp;camp=1789&amp;creative=390957&amp;creativeASIN=1934356980&amp;linkCode=as2&amp;tag=benmccormicko-20&amp;linkId=FE3JFKHYVRYCUOVS">Practical Vim</a> is the best guide I’ve found on making good use of repetition in Vim.  I learned plenty of the stuff in this article from that book.  For those who don’t want to pay, I’m currently giving <a href="http://benmccormick.org/2014/07/11/new-twitter-feed-and-practical-vim-giveaway/">new subscribers a chance to win 2 copies of the book</a>.  You can also see more about repetition from Drew online at <a href="http://vimcasts.org/categories/repetition/">Vimcasts</a>.</li>
<li>Tim Pope has published a plugin that allows you to extend the dot command to work on arbitrary user commands.  It also works out of the box with many of his other plugins.  You can see it on <a href="https://github.com/tpope/vim-repeat">Github</a>.</li>
</ul>
<hr>
<h3>Subscribe</h3>
<p>This was the fifth in a series of posts on learning Vim in a modern way.  If you enjoyed the post consider subscribing by using the <a href="http://feedpress.me/benmccormick">feed</a>,  with <a href="http://twitter.com/benmccormickorg">Twitter</a> or by joining my <a href="http://eepurl.com/WFYon">mailing list</a>.  Also check out the <a href="http://benmccormick.org/2014/07/21/learning-vim-in-2014-getting-more-from-vim-with-plugins/">next post</a> in the series, covering the use of plugins in Vim.</p>
</div><hr style="margin-bottom:3.332rem;" data-reactid="21"/><noscript data-reactid="22"></noscript><p style="margin-bottom:4.165rem;" data-reactid="23"><!-- react-text: 24 -->Written by <!-- /react-text --><!-- react-text: 25 -->Ben McCormick<!-- /react-text --></p><div title="Learning Vim in 2014: Vim as Art" data-reactid="26"><div id="disqus_thread" data-reactid="27"></div><noscript data-reactid="28"><span data-reactid="29"><!-- react-text: 30 -->Please enable JavaScript to view the<!-- /react-text --><a href="http://disqus.com/?ref_noscript" data-reactid="31">comments powered by Disqus.</a></span></noscript><a href="http://disqus.com" class="dsq-brlink" data-reactid="32"><!-- react-text: 33 -->Blog comments powered by <!-- /react-text --><span class="logo-disqus" data-reactid="34">Disqus</span><!-- react-text: 35 -->.<!-- /react-text --></a></div></div><span style="display:block;clear:both;" data-reactid="36"> </span></div></div><script src="/bundle.js?t=1481347458227"></script><script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-37323973-1', 'auto');
            ga('send', 'pageview');
        </script></body></html>